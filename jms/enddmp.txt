From: Joe Smith <JMS@F74.Tymnet.COM> (NSC.J/SMITH@Ontyme) 
Date: Wed, 29 May 91 13:35:01 PDT 
To: whitehur@spiff 
Subject: Location of ENGDMP 

(BNING       :  37) ENGD           2 12-Jan-89 18:44 CABGUC  ALL  RD  NO   
(RCHUN       :  38) ENGDEP         3 21-Mar-87 17:09 CUDKAZ  ALL  RD  NO   
(ALPS        :  37) ENGDMP         2 08-Oct-86 12:13 KEFPEN  ALL  RD  NO   
(BNING       :  37) ENGDMP         2 08-Oct-86 12:13 KEFPEN  ALL  RD  NO   
(BRUCES      :  37) ENGDMP         2 08-Oct-86 12:13 KEFPEN  ALL  RD  NO   
(ENGDIAG     :  26) ENGDMP         2 08-Oct-86 12:11 KEFPEN  ALL  RD  RD   
(ENGDIAG     :  33) ENGDMP         2 08-Oct-86 12:13 KEFPEN  ALL  RD  RD   
(ENGDIAG     :  37) ENGDMP         2 08-Oct-86 12:13 KEFPEN  ALL  RD  RD   
(EXXNET      :  26) ENGDMP         2 08-Oct-86 12:13 KEFPEN  ALL  RD  NO   
(EXXNET      :  37) ENGDMP         2 08-Oct-86 12:13 KEFPEN  ALL  RD  NO   
(JLINDBACK   :  26) ENGDMP         2 08-Oct-86 12:11 KEFPEN  ALL  RD  NO   
(MABBAS      :  33) ENGDMP         2 08-Oct-86 12:13 KEFPEN  ALL  RD  NO   
(NTS         :  33) ENGDMP         2 08-Oct-86 12:13 KEFPEN  ALL  RD  NO   
(WRFS        :  37) ENGDMP         2 08-Oct-86 12:13 KEFPEN  ALL  RD  NO   
(BNING       :  26) ENGDMP         2 01-Oct-86 08:05 ZEYVOD  ALL  RD  NO   
(DIALNET     :  26) ENGDMP         2 13-Dec-85 18:26 ZEYVOD  ALL  RD  RD   
(NSSC        :  30) ENGDMP         2 01-Jul-85 11:43 ZEYVOD  ALL  RD  NO   
(OSMAN       :  33) ENGDMP         2 07-Jul-82 11:48 ZEYVOD  ALL  RD  NO   
(RVIVIER     :  37) ENGDMP         2 14-May-87 17:13 ZEYVOD  ALL  RD  NO   
(SWBNET      :  33) ENGDMP         2 08-Jun-86 17:52 ZEYVOD  ALL  RD  NO   
(TKOCHMANN   :  26) ENGDMP         2 01-Oct-86 08:05 ZEYVOD  ALL  RD  NO   
(TKOCHMANN   :  33) ENGDMP         2 15-Nov-85 11:27 ZEYVOD  ALL  RD  NO   
(TKOCHMANN   :  38) ENGDMP         2 01-Jan-89 01:41 ZEYVOD  ALL  RD  NO   
(TNSM        :  23) ENGDMP         2 05-Oct-85 09:25 ZEYVOD  ALL  RD  NO   
(TRWNET      :  26) ENGDMP         2 18-Nov-86 18:17 ZEYVOD  ALL  RD  RD   
(TRWNET      :  33) ENGDMP         2 17-Dec-86 18:14 ZEYVOD  ALL  RD  RD   
(UKOPS       :  26) ENGDMP         2 13-Sep-85 02:01 ZEYVOD  ALL  RD  NO   
(VACODE      :  26) ENGDMP         2 18-Nov-85 07:50 ZEYVOD  ALL  RD  NO   
(DBRUNETT    :  26) ENGDMP.DOC     3 19-Sep-84 13:24 RILBIV   NO  NO  NO   
(1213MGR     :  74) ENGDMP.DOC     3 11-Nov-82 19:19 XALRUV  ALL  RD  NO   
(ENGDIAG     :  26) ENGDMP.DOC     3 14-Oct-86 14:35 XALRUV  ALL  RD  RD   
(ENGDIAG     :  33) ENGDMP.DOC     3 08-Oct-86 12:13 XALRUV  ALL  RD  RD   
(ENGDIAG     :  37) ENGDMP.DOC     3 08-Oct-86 12:14 XALRUV  ALL  RD  RD   
(EXXNET      :  26) ENGDMP.DOC     3 08-Oct-86 12:14 XALRUV  ALL  RD  NO   
(EXXNET      :  37) ENGDMP.DOC     3 08-Oct-86 12:14 XALRUV  ALL  RD  NO   
(NTS         :  33) ENGDMP.DOC     3 08-Oct-86 12:13 XALRUV  ALL  RD  NO   
(OSMAN       :  14) ENGDMP.DOC     3 02-Apr-86 09:13 XALRUV  ALL  RD  NO   
(OSMAN       :  26) ENGDMP.DOC     3 04-Feb-86 09:30 XALRUV  ALL  RD  NO   
(OSMAN       :  33) ENGDMP.DOC     3 02-Apr-86 09:13 XALRUV  ALL  RD  NO   
(SWBNET      :  33) ENGDMP.DOC     3 21-Oct-86 09:39 XALRUV  ALL  RD  NO   
(TKOCHMANN   :  26) ENGDMP.DOC     3 04-Feb-86 09:30 XALRUV  ALL  RD  NO   
(TKOCHMANN   :  38) ENGDMP.DOC     3 01-Jan-89 01:42 XALRUV  ALL  RD  NO   
(MOORING     :  37) ENGDMP.MK2     2 30-Jun-83 16:15 RIJQAZ  ALL  RD  NO   
(DBRUNETT    :  26) ENGDOC.LST     2 19-Sep-84 13:31 JAFQIP   NO  NO  NO   

----------
TYPE ENGDMP.DOC
THIS IS A DOCUMENT DESCRIBING THE COMMON CRASH TABLE FOR ALL TYMNET
ENGINE SOFTWARE.

SUPPORTED SOFTWARE:

TYMNET I REMOTE		###451 AND ABOVE
TYMNET II SOLO		###4?? AND ABOVE
ISIS KERNEL		4.11   AND ABOVE


THE TABLE IS ORGANIZED INTO THREE PARTS. FIRST THERE IS A CRASH TABLE
HEADER, WHICH CONTAINS GENERAL INFORMATION ABOUT THE NODE. SECOND
THERE IS A CRASH TABLE SUMMARY, WHICH CONTAINS BASIC INFORMATION FOR
THE LAST 16 CRASHES. THIRD AND LAST THERE IS THE DETAILED CRASH TABLE,
WHICH WILL CONTAIN EXTENSIVE DATA FOR THE FIRST CRASH OF THE MACHINE
(EXCLUDING POWER FAILS AND MANUAL RESTARTS) AND THE THE LAST CRASH
(AGAIN NO POWER FAILS OR MANUAL RESTARTS).

PHYSICAL LOCATION 0006C WILL ALWAYS CONTAIN THE PHYSICAL ADDRESS OF THE
BEGINNING OF THE THE CRASH TABLE.

CRASH TABLE HEADER:

NODENUMBER	HS	1	:MACHINE NODE NUMBER
NODETYPE	HS	1	:NODE TYPE (SEE TABLE BELOW)
TABVER		HS	1	:VERSION OF CRASH TABLE
CODVER		HS	1	:VERSION OF CODE
TAKETIME	WS	1	:REAL TIME OF FIRST TAKE OVER (GMT)
CRCNT		HS	1	:CURRENT CRASH COUNT

CRASH SUMMARY:

CRCNT		HS	1	:CRASH COUNT FOR ENTRY
CRID		HS	1	:CRASH ID (SEE TABLE BELOW)
CRPSD		WS	2	:CRASH PSW AND PC
CRTIME		WS	1	:REAL TIME OF CRASH (GMT)

DETAIL TABLE:

CRCNT		HS	1	:CRASH COUNT FOR ENTRY
CRID		HS	1	:CRASH ID (SEE TABLE BELOW)
CRPSD		WS	2	:CRASH PSW AND PC
CRTIME		WS	1	:REAL TIME OF CRASH (GMT)
REGS0		WS	$0 10	:REGISTER SET 0
REGSF		WS	$0 10	:REGISTER SET F (OR CURRENT SET)
MACREGS		HS	$0 30	:MAC REGISTERS (LOCATIONS 300-35F)
LASTSLOT	HS	1	:LAST SLOT EXECUTED (FILLED BY ISIS ONLY)



THE SUMMARY TABLE IS A PUSH DOWN STACK, MEANING THAT THE FIRST ENTRY IS
FOR THE LAST CRASH, THE SECOND ENTRY IS THE PREVIOUS CRASH AND SO ON.
THE CRASH TABLE WILL NOT BE OVER WRITTEN BY REPETITIVE LOADS AND THE
SOFTWARE WILL NOT INITIALIZE IT. SO IF THE MACINE IS RELOADED WITH THE
SAME CODE WE CAN STILL READ OUT OLD CRASH INFORMATION.

THE TAKETIME LABEL WILL CONTAIN THE REAL TIME VALUE OF THE FIRST TAKEOVER
(IN GMT) AFTER A RELOAD. HOWEVER UPON FIRST STARTUP THE VALUE WILL BE SET
TO HEX 80000000. ALSO ANY CRASHES OCCURING BEFORE THE FIRST TAKEOVER WILL
BE THE NUMBER OF SECONDS PLUS THE INITIAL VALUE. ALL VALID TIMES WILL NOT
HAVE THE HIGH ORDER BIT ON.

NODE TYPES:



CRASH ID'S:

        Crash  codes  will  be  one byte,  with  the  high-order  nibble
        designating  the general  crash type  and  the low-order  nibble
        giving additional information.


          2x - Parity error
          20 - Non-DMA
          21 - DMA

          3x - Unexpected interrupt
          30 - Non-microcode device
          31 - Microcode-controlled device

          4x - Instruction failure
          40 - Illegal instruction (memory location bad)
          41 - Legal illegal instruction (memory location OK)
          42 - Instruction malfunction (e.g., illegal result)

          5x - MAC error
          50 - Protection violation
          51 - Out of bounds
          52 - DMA time-out
          53 - Presence error
          54 - Write interrupt
          55 - Fetch error

          6x - Software-detected errors (common)
          60 - Illegal SVC
          61 - Dispatcher detected error
          62 - Hardware consistency error
          63 - Software consistency error
          64 - GCI crash - empty buffer
          65 - GCI crash - illegal buffer index
          66 - Bufferlet error - illegal free list pointer

          7x - Software-detected errors (code-dependent)

          8x - Configuration error
          80 - Not enough memory
          81 - Required device not assigned
          82 - Wrong device type

          9x - Device failure
          90 - Busy/not ready
          91 - Status error
          92 - Missing interrupt

          Ax-Fx - Reserved for future use.


        The above crash codes will be used  in the CRID (crash ID) field
        of the crash  table, for crash reports  to the SUP log,  and for
        console displays.  The format of console displays is as follows:

           +----+----+----+----+----+----+----+----+----+
           ^    ^  D ^  E ^  A ^  D ^  t ^  t ^  c ^  c ^
           +----+----+----+----+----+----+----+----+----+

        where DEAD indicates  a crash, tt defines the node  type, and cc
        is the crash code.

        To run  ENGDMP  you must first invoke the NAD assembler:

        -R NADcr
        xxxxxx (version #)
        ;X    (ENGDIAG)ENGDMPcr

        The program is self prompting from this point on.
  
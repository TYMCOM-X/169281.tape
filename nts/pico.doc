                                                                   May 27, 1988







                            ****  *****  ****  *** 
                            *   *   *   *     *   *
                            ****    *   *     *   *
                            *       *   *     *   *
                            *     *****  ****  *** 

                      ***** *   *  ***  ***** *   * *****
                      *     **  * *   *   *   **  * *    
                      ****  * * * *       *   * * * **** 
                      *     *  ** *  **   *   *  ** *    
                      ***** *   *  **** ***** *   * *****

                      *   *  ***  *   * *   *  ***  *    
                      ** ** *   * **  * *   * *   * *    
                      * * * ***** * * * *   * ***** *    
                      * * * *   * *  ** *   * *   * *    
                      *   * *   * *   *  ***  *   * *****

                                  Pico Engine
                                SERVICE MANUAL


                               By:  TIM KOCHMANN




                            ***********************

                                    TYMNET
                          NATIONAL TECHNICAL SUPPORT
                                 May 27, 1988



     ====================================================================
     |   Tymnet,  Inc.'s  proprietary  rights  are  included  in  the   |
     |   information disclosed herein.   The recipient,  by receiving   |
     |   this document,  agrees  that neither this  document nor  the   |
     |   information  disclosed  herein nor any part thereof shall be   |
     |   reproduced or transferred to  other  documents  or  used  or   |
     |   disclosed  to  others  for  manufacturing  or  for any other   |
     |   purpose except  as  specifically authorized  in  writing  by   |
     |   Tymnet, Inc.                                                   |
     ====================================================================




                                    PICO Engine                  SERVICE MANUAL
                                                                   May 27, 1988







                                 TABLE OF CONTENTS

    Section                                                                Page



    1.   INTRODUCTION                                                         1
      1.1   PURPOSE OF THE PICO SERVICE MANUAL                                1
      1.2   OVERVIEW OF THE SERVICE MANUAL                                    1


    2.   SYSTEM DESCRIPTION                                                   3
      2.1   SYSTEM OVERVIEW                                                   3
      2.2   EP                                                                4
      2.3   I/O CONTROLLER                                                    6
      2.4   BLOCK DIAGRAM                                                     9


    3.   PHYSICAL DECRIPTION                                                 10
      3.1   FRONT PANEL                                                      10
      3.2   FRONT PANEL DIAGRAM                                              10
      3.3   REAR PANEL                                                       11
      3.4   REAR PANEL DIAGRAM                                               11
      3.5   DIMENSIONS                                                       12
      3.6   ENVIRONMENTALS                                                   12


    4.   COMMUNICATION INTERFACE                                             13
      4.1   PROTOCOL SUPPORT                                                 13
      4.2   INTERFACE SIGNALS                                                14
      4.3   INTERFACE STANDARD                                               14
      4.4   MAXIMUM CABLE LENGTH                                             14
      4.5   PORT CONFIGURATION                                               15


    5.   INSTALLATION                                                        17
      5.1   AC POWER                                                         17
      5.2   BBU - BATTERY BACKUP UNIT                                        19
      5.3   BOARD STRAPPING                                                  20
      5.4   EP HARDWARE STRAPPING                                            20
      5.5   IOC/SCC HARDWARE STRAPPING                                       21
      5.6   PROM/PAL REFERENCE                                               25
      5.7   PICO ECO REFERENCE LEVELS                                        26
      5.8   PCB CABLES                                                       27
      5.9   SPECIAL EQUIPMENT                                                27
      5.10  LOADING PICO                                                     28



                                    PICO Engine                  SERVICE MANUAL
                                                                   May 27, 1988


    6.   CONSOLE PROCESSES                                                   32
      6.1   MODES OF OPERATION                                               32
      6.2   ENGBUG                                                           33
      6.3   TTY I/O                                                          42
      6.4   IOCbug                                                           42


    7.   MAINTENANCE INFORMATION                                             45
      7.1   DIAGNOSTIC TOOLS                                                 45
      7.2   SELF TESTS DESCRIPTORS                                           46
      7.3   STANDALONE DOWN-LINE-LOAD DIAGNOSTICS                            47
      7.4   RS-232 SIGNAL LOOPBACK METHODS                                   51
      7.5   COMPONENT PART NUMBERS                                           51
      7.6   ISIS ENVIRONMENT TROUBLESHOOTING                                 53
      7.7   SCC STATUS                                                       54


    8.   ISIS REFERENCES                                                     59
      8.1   ISIS MACROS                                                      59
      8.2   ISIS SOFTWARE STRAPPING                                          61
      8.3   MERLIN                                                           67
      8.4   TBETATEST                                                        67


    9.   PERFORMANCE CAPABILITIES                                            68
      9.1   WEIGHTING                                                        68
      9.2   COMPARATIVE ANALYSIS VS ENGINE/HDLC MICRO                        71
      9.3   PERFORMANCE CAPABILITIES OVERVIEW ISIS                           71


    10.  MANUFACTURING SYSTEM TESTS                                          72
      10.1  TEST PHILOSOPHY                                                  73


    11.  APPENDIX                                                            75
      11.1  NTS LABORATORY TESTS                                             76
      11.2  DOCUMENT REFERENCES                                              80
      11.3  GLOSSARY                                                         82
      11.4  ERROR RETURN CODES                                               84
      11.5  DEVICE VECTORS                                                   84
      11.6  MAILBOX STRUCTURE                                                84
      11.7  CHANNEL COMMAND WORDS                                            84
      11.8  TROUBLE-SHOOTING FLOWCHART                                       85











                                    PICO Engine                  SERVICE MANUAL
    INTRODUCTION                                                   May 27, 1988






                                 1 -  INTRODUCTION







                      1.1  PURPOSE OF THE PICO SERVICE MANUAL


    The  purpose  of  the  Pico Service  Manual  is  to  provide  the necessary
    information  to successfully  install and  operate the  Pico  engine.  This
    document   outlines  the   installation  procedures,   operational  monitor
    procedures,  debugger  facilities,  performance  capabilities  and physical
    descriptions of the elements of the Pico engine.






                        1.2  OVERVIEW OF THE SERVICE MANUAL


    The Pico Service Manual is divided into eleven sections.


    Section 1, this introduction, provides general information about  the scope
    and objectives of the Pico Service Manual.


    Section 2,  System Description, provides  a general overall  description of
    the individual components of the Pico engine.


    Section  3,  Physical Description,  describes  the physical  detail  of the
    components of the Pico engine.


    Section 4, Communication  Interface, describes the port  configurations and
    interface signals and standards.


    Section 5, Installation, describes the steps necessary to install  the Pico
    engine  including detailed  descriptors of  soft strap  default  values and
    options as well as the dozens of hardware straps and options.



    1                               PICO Engine                  SERVICE MANUAL
    INTRODUCTION                                                   May 27, 1988


    Section 6, Virtual Console operation, describes Monitor processes including
    Front Panel displays, TTY I/O and terminal operated debugging processes.


    Section  7,  Maintenance  Hints,  describes  troubleshooting, communication
    channel evaluation and general maintenance hints.


    Section 8, Miscellaneous Information, describes several relevant  pieces of
    information pertaining  to the Pico  engine including ISIS  Tymfile machine
    configuration default and optional parameters.


    Section 9, Performance Capabilities, describes the performance of  the Pico
    engine  under different  simulated  network loads  and  empirically derived
    weighting factors.


    Section 10, Manufacturing Tests, describes the series of Power-On-Self-Test
    (POST),   down-line-loadable   Standalone  Diagnostics   and   ISIS  System
    exercisers Computer Systems Company will utilize for bring-up and burn-in.


    Section 11,  An appendix of error return codes and acronyms.






























    2                               PICO Engine                  SERVICE MANUAL
    SYSTEM DESCRIPTION                                             May 27, 1988






                              2 -  SYSTEM DESCRIPTION







                               2.1  SYSTEM OVERVIEW


         The  Pico engine  provides  a "low  end" Tymnet  Engine  Family system
    capable  of  functioning  as a  communications  node  in  Tymnet networking
    applications.  The product consists of a functionally equivalent CPU II and
    MAC III  implemented in  LSI gate  arrays with  1 megabyte  of memory  on a
    single  micro-code-driven  Engine  Processor  board  and   an  intelligent,
    microprocessor driven Input/Output Controller board functionally equivalent
    to the SIO Motherboard/Daughtercard system of the Standard  Engine designed
    specifically for data communications.


         The  micro-code-driven  Engine  Processor  (EP)  utilizes  256 general
    purpose registers, each 32  bits wide and supports special  instructions to
    facilitate  the implementation  of  Tymnet technology.   The  available CPU
    power is equivalent to the Standard Engine with a MAC III and 10 MHz CPU II
    installed.


         The microprocessor driven  I/O Controller (IOC)  is based on  a 16-bit
    virtual  memory/virtual machine  technology and  supports Tymnet  Sync, SIO
    Async  and SIO  HDLC communication  protocols with  true DMA  available for
    high-speed channel I/O data transfers.


         Eight (8)  communication ports  are supported in  full duplex  or half
    duplex modes.  SIO Async transmission speeds are available from 50  to 9600
    bps.  Synchronous transmission  rates are supported  from 2400 to  64K bps.
    Internal  clocking  is  provided  on  ports  2  through  7   for  interface
    applications and  ports 0 through  7 for loopback  diagnostic capabilities.
    Interface  signals  conform to  EIA  RS-232-C, CCITT  V.24  and  CCITT V.35
    recommendations.


         System configuration is software defined and controlled.  Any of the 8
    communication ports can be  individually configured to support  bit (HDLC),
    byte  synchronous (Esync),  Tymnet  T201 (Tymsync)  or  asyncronous (Async)
    protocols.



    3                               PICO Engine                  SERVICE MANUAL
    SYSTEM DESCRIPTION                                             May 27, 1988


         Pico  engine  is supplied  in  an aluminum  compact  desk  top package
    complete with power supply and cooling fans.  The front panel  contains two
    status indicator LEDs (RUN and DIAG FAIL) for easy identification of system
    operating status.






                                      2.2  EP


         The Engine Processor utilizes  256 registers, each 32-bits  wide.  The
    EP microcode is clocked at  10 MHz therefore each microcycle period  is 100
    nanoseconds.  The EP board is the functional equivalent of the CPU  II, ROM
    I/O  and MAC  III (with  dynamic  not static  memory) boards.   The  CPU is
    logically  divided  into  an  Arithmetic  Logic  Unit  (ALU)   with  32-bit
    capability and an Instruction  Execution Unit (IEU) which supports  the 64-
    bit wide microcode  (25-bits control ALU,  26-bits control IEU,  13 general
    purpose bits).  The instruction set is object compatible with  the Standard
    engine except for Mac and I/O related instructions.  The microcode supports
    the current instructions to  the TTY/CONSOLE (device 02x), the  WDT (device
    05x),  emulated sync  (device 20x-2Fx)  and SIO  (device 80x).   Both Front
    Console and TTY  functions are combined  in the terminal  console facility.
    The EP  uses an  internal bus  with 24 address  bits and  16 data  bits for
    accessing both memory  and I/O.  All  memory address registers  are 24-bits
    although only 20 are used in virtual address relocation.  The memory design
    supports  byte  write  operations eliminating  the  need  for  microcode to
    simulate byte writes  with a read-modify-write  as in the  Standard Engine.
    The byte address field of the virtual address consists of 10-bits resulting
    in 1024  byte page sizes.   Each memory requestor  may drive  the Physical-
    Virtual signal active to cause memory address Virtual Relocation.


         The MAC monitors the state of the Physical/Virtual control  signal for
    each address requested for  relocation.  If the Physical/Virtual  signal is
    not set by  the requestor an absolute  physical address is  generated.  All
    I/O  requests  for  memory  access  are  unrelocated,   physical  accesses.
    Priority of the memory bus requestors is first to memory refresh, second to
    I/O channel and third to  CPU.  Memory cycle time is 400  nanoseconds.  The
    Mac Segment register field is 14-bits wide.  The Mac Segment register field
    itself is only 6-bits allowing for 64 pages/segment with a segment  size of
    64K  bytes.  The  maximum memory  per context  is 1  Mbyte and  the maximum
    memory for the MAC with 16 contexts is 16 Mbytes.


         The Mac diagnostic  registers save both  the virtual and  the physical
    address  of the  memory  location causing  the error  interrupt.   Only the
    virtual address of the last correctly fetched instruction is  saved.  Error
    Address  registers  must be  read  prior to  reading  the  Interrupt Status
    register  at 340x  which  will reset  the error  registers.   Error Address


    4                               PICO Engine                  SERVICE MANUAL
    SYSTEM DESCRIPTION                                             May 27, 1988


    registers are read at 344x (Physical) and 348 (Virtual) rather than at 348x
    and 34Ax as on the Standard engine.  Bit 0 will be set if DMA was accessing
    memory at time of error, reset if CPU (bit 0 being the left-most, LSB digit
    of the  register).  Only bits  0 through 23  are used.The  memory subsystem
    performs single-bit error detection via parity across 16-bit  halfwords but
    like the HDLC  micro engine contains  no Error Correction  Circuitry (ECC).
    The boot-strap  macrocode writes into  every memory location  to initialize
    the parity data.  The 16-bit  memory data bus is a  tri-state bidirectional
    bus.  The main memory is implemented with 150 nanosecond access time 256K X
    9-bit Single  In-line Packages  (SIPs) organized  as two  banks of  16 data
    bits.

                      EP MEMORY ALLOCATION MAP

    ABSOLUTE PHYSICAL ADDRESS |     DESIGNATED USE
            ------------------------------------------
           F0000-FFFFFx       | CHANNEL 0 BUS MEMORY WINDOW
            1300-EFFFFx       | AVAILABLE MEMORY
             700- 12FFx       | RESERVED FOR BOOT
             540 - 6FFx       | RESERVED FOR ISIS
             400 - 53Fx       | SYNC u-CODE LINE DESCRIPTORS
             3F0 - 3FFx       | S-BUS INTERFACE
             370 - 3EFx       | I/O CHANNEL INTERFACE REGISTER HARDWARE
             300 - 36Fx       | MAC REGISTER HARDWARE
             2E0 - 2FFx       | RESERVED FOR ISIS
             2D0 - 2DFx       | SYSTEM LOAD COMMUNICATION AREA
              D0 - 2CFx       | I/O INTERRUPT VECTOR DISPATCH TABLE
              C8 -  CFx       | AVAILABLE MEMORY (WAS ENG/XPI MESSAGE AREA)
              BC -  C7x       | USAGE NOT KNOWN!!!
              9C -  BBx       | SVC VECTOR DISPATCH TABLE
              98 -  9Bx       | NEW PSW FOR SV            90 -  97x       | NEW PSW+PC FOR MAC VIOLATION INTERRUPT
              74 -  8Fx       | RESERVED FOR ISIS
              70 -  73x       | ISIS ENTRY POINT
              6C -  6Fx       | ISIS CRASH TABLE POINTER
              48 -  6Bx       | BOOT ENTRY POINTS
              40 -  47x       | USAGE NOT KNOWN!!!
              38 -  3Fx       | NEW PSW+PC FOR MEM PARITY ERROR (MALFUNCTION)
              30 -  37x       | NEW PSW + PC FOR ILLEGAL ISTRUCTION TRAP
              28 -  2Fx       | USAGE NOT KNOWN!!!
              20 -  27x       | OLD PSW+PC FOR MEM PARITY ERROR (MALFUNCTION)
              1C -  1Fx       | RESERVED FOR TRACE ROUTINE
              18 -  1Bx       | NEW PC FOR TRACE TRAP
              10 -  17x       | OLD PSW+PC FOR TRACE TRAP
               0 -   Fx       | A BRANCH TO HERE HALTS WITH LOW MEM ERROR

         The IEU (Instruction Execution Unit) controls and monitors instruction
    reads,  writes  and  executions.   The  IEU  commands  the  MAC   to  fetch
    instructions from  Engine memory, decodes  the instructions and  executes a
    sequence  of  microcode operations  (resident  on EP  ROM)  to  perform the
    specified  instructions.  When  sequencing through  the  microcode, control
    signals are  generated to control  the ALU, test  ALU flags and  respond to


    5                               PICO Engine                  SERVICE MANUAL
    SYSTEM DESCRIPTION                                             May 27, 1988


    interrupts.  Seven levels  of interrupts are  incorporated on the  PICO EP.
    There exist for each interrupt, a microcode interrupt service routine whose
    execution entry point is stored in dedicated microcode locations.

    ENTRY POINT VECTOR | INTERRUPT SERVICE ROUTINE
    ------------------   -------------------------
            60x        | Power Fail Interrupt (Level 6/NMI)
            A0x        | Console Interrupt (Level 5/NMI)
            E0x        | Main Mem Parity Error (Level 4/Maskable PSW bit-2=0)
           120x        | MAC Violation (Level 3/Maskable PSW bit-5=0)
           160x        | ATN0 (600 Hz RTC/maskable PSW bit-1=0)
           1A0x        | ATN1 (IOC I/O/Maskable PSW bit-8=0)
           1E0x        | ATN2 (Channel 0 Command I/O/Maskable PSW bit 9=0)

          The  IEU contains  the Engine  PSW (Program  Status  half-Word) whose
    specific bit interpretations are  detailed in the Engine pocket  guides and
    Engine documents.






                                2.3  I/O CONTROLLER


         The intelligent Input/Output Controller (IOC) is based on the Motorola
    68010 microprocessor  technology also  clocked at 10  MHz resulting  in 100
    nanosecond microcycle  time as  on the  EP.  Standard  engine Multifunction
    card TTY I/O,  Real-Time-Clock (RTC) interrupts, Watch-Dog-Timer  (WDT) and
    Bootstrap  functions are  implemented  on the  IOC via  the  Motorola 68901
    multifunction peripheral (MFP) device.   The IOC presents itself to  the EP
    as  an   SIO  Motherboard   device  address  80x   servicing  I/O   from  8
    communications ports plus one TTY port.  Zilog Z8530  Serial Communications
    Controllers (SCCs) emulate the Z80 Serial Input Output (SIO) devices of the
    Tymnet  Engine  SIO daughter-cards  as  implemented in  IOC  Firmware.  IOC
    processes are  managed by  IOC instructions and  constants resident  in on-
    board ROM.  On-board static RAM stores dynamic arrays and I/O  data.  Ports
    0 through 3 are located on the  IOC board proper and ports 4 through  7 are
    on a 4 port SCC daugther-card piggybacked to the IOC via ribbon connectors.


         Ports 0 and 1  have true DMA capability  in the HDLC mode  and support
    line speeds of up to 64K bps.  In emulated sync and sio-async modes ports 0
    and 1  must interrupt the  EP for accesses  to memory the  same as  ports 2
    through  7  always must.   Requests  for  memory access  from  the  IOC are
    arbitrated by  the EP along  with memory refresh  request and  CPU request.
    Tymsync  (Tymnet  Sync),  Async,  and  HDLC  communications  protocols  are
    available.  The  system configuration is  software defined  and controlled.
    Individual  ports   can  be  configured   to  support   bit-oriented,  byte
    synchronous,or Tymnet T201 protocols.



    6                               PICO Engine                  SERVICE MANUAL
    SYSTEM DESCRIPTION                                             May 27, 1988


              Unlike the HDLC Micro Engine I/O board, the PICO IOC has a single
    internal bus to which all  devices are connected.  The bus is  comprised of
    the necessary bidirectional data, unidirectional address  and bidirectional
    control lines which propagate Function Codes, Interrupt requests, Interrupt
    acknowlegements, Read/Write requests and Data  Transferred acknowledgements
    for the M68010 microprocessor.  The M68010 supports 7 levels of interrupts,
    5 of which are implemented  on the IOC.  Interrupt request are  encoded for
    prioritization and presented  to the M68010  for service.  If  the incoming
    interrupt level is greater  than the present interrupt being  serviced, the
    M68010 will push the context of the interrupted process onto the  stack and
    assert  an  interrupt acknowledge  to  the requestor  via  address  lines 1
    through 3 which respond the level of the successful interrupt request along
    with  a Function code of 3  which are decoded back to the  requestor.  Upon
    receipt of IACK  (Interrupt Acknowledge) the  requestor places a  vector on
    the  address bus  which  points to  a  service routine  for  the particular
    interrupt.  Service  routines complete with  a RTE (Return  from Exception)
    instruction to the M68010 at which time the interrupted process' context is
    retrieved from the stack and completed.

    ENTRY POINT VECTOR | INTERRUPT SERVICE ROUTINE
    ------------------   -------------------------
            7Cx        | WATCHDOG TIMEOUT (Level 7/NMI)
           12Cx        | SCC SERVICE REQUESTS (Level 6)
           128x        | DMA SERVICE REQUESTS (Level 5)        
            70x        | ATN1 REQUESTS (Level 4)
           114x        | MFP SERVICE REQUESTS (Level 3)

    NOTE:  Interrupts 4 and 7 assert VPA (Valid Peripheral Address).  During
           an Interrupt Acknowledge cycle, when VPA is asserted the   M68010
           assert VMA and complete a normal M6800 read cycle.  The processor 
           will then use an internally generated vector that  is  a function 
           of the interrupt being serviced.    This process is Autovectoring
           and 7 autovectors exist for the M68010 from 25d to 31d.The M68010
           will then place a vector on the bus and initiate   a  synchronous
           bus cycle.

         The 24-bit  address bus of  the M68010 provides  16 MBytes  of address
    space.  Devices are each given a  unique address on the bus in the  upper 4
    KBytes of  memory space from  FFF000 to FFFFFFx.   Devices are  accessed by
    placing the device  address on the address  bus along with  the appropriate
    data and control signals.  The IOC has access to Engine main memory but the
    EP can only  access IOC RAM via  channel command words  implemented through
    Engine microcode.











    7                               PICO Engine                  SERVICE MANUAL
    SYSTEM DESCRIPTION                                             May 27, 1988


                      IOC MEMORY ALLOCATION MAP
    ABSOLUTE PHYSICAL ADDRESS |   DESIGNATED USE
         ------------------------------------------
           FFFFF0-FFFFFFx     | SCC 3 - PORTS 6,7
           FFFFE0-FFFFEFx     | SCC 1 - PORTS 2,3
           FFFFD0-FFFFDFx     | SCC 2 - PORTS 4,5
           FFFFC0-FFFFCFx     | SCC 0 - PORTS 0,1
           FFFF80-FFFFBFx     | M68901 MFP REGISTERS
           FFFE81x            | BIT PORT ENABLE
           FFFE61-FFFE7Fx     | SSR MODE (SENSE STATUS REQUEST)
           FFFE51-FFFE5Fx     | SSR CLOCK
           FFFE40-FFFE4Fx     | DIAG ENABLE
           FFFE20-FFFE3Fx     | ENGINE MEMORY BUS LOCK
           FFFE00-FFFE1Fx     | WATCHDOG TIMER RESET
           FFFD00-FFFDFFx     | M68450 REGISTERS
           8F0022x            | CHANNEL 0 HALT I/O
           8F0020x            | CHANNEL 0 START I/O
           8003C0x            | IOC TO EP ATN1 MAILBOX INTERRUPT FLAG
           800380x            | EP TO IOC MAILBOX INTERRUPT FLAG
           800370x            | CONSOLE TO EP MAILBOX INTERRUPT FLAG
           8F0004x            | CHANNEL 0 ATN2 TO EP INTERRUPT
           800000-8FFFFFx     | 1 MBYTE EP MAIN MEMORY
           400000-41FFFFx     | 128 KBYTE IOC RAM
           000000-01FFFFx     | 128 KBYTE IOC ROM

    NOTE:  For reference, please observe that reading addresses in the 8XXXXXx
           range from the IOC as presented from the IOCbug process,are exactly
           the same addresses in the 0XXXXXx range  from the EP perspective as
           presented from the ENGbug process.

























    8                               PICO Engine                  SERVICE MANUAL
    SYSTEM DESCRIPTION                                             May 27, 1988


                                2.4  BLOCK DIAGRAM


    BLOCK DIAGRAM EXTRACTED AND ABBREVIATED FROM PICO MAINTENANCE MANUAL
    ______________________________________________________________
    |    -----------                                -----------  |
    |    |   ALU   |        ________________________|1 MEG MEM|  |
    |    -----------   _____|______                 -----------  |
    |     ||     ||    |MEM TIMING|                  || ||  ||   |
    |    ___________   ------------   ___________   -----------  |
    |    |   IEU   |   _____|______   | REFRESH |   |   MAC   |  |
    |    -----------   |  ARBITOR |   -----------   -----------  |
    |      |  | | |    ------------     |             |  |  |    |
    |      |  | |  \____/     |   \_____/             |  |  |    |
    |      |  |  \____________|_CONTROL______________/   |  |    |
    |      |   \____________|_|__DATA___________________/   |    |
    |       \_____________|_|_|_ADDRESS____________________/     |
    |                   | | | |  (EP)                            |
    --------------------|-|-|-|-----------------------------------
                        | | | |
    ____________________|_|_|_|___________________________________
    |                 __|_|_|_|__ _______ _______ _______ _______|
    |                 |   BUS   | |68010| |68450| | RAM | | ROM ||
    |                 |INTERFACE| ------- ------- ------- -------|
    |                 -----------  | | |   | | |   | | |   | |   |
    |    ----ADDRESS<-----|--|-|   | | |   | | |   | | |   | |   |
    |    | ----DATA<------|->| |___|_|_|___|_|_|___|_|_|___| |   |
    |    | | -CONTROL<--->|  |_|_____|_|_____|_|_____|_|_____|   |
    |    | | |            |__|_|_______|_______|_______|         |  
    |    | | |             | | |________________________         |
    |    | | |             | |_________|_______|_____  |         |
    |    | | |             |_________|_|_____|_|___ |  |         |    
    |    | | |                    _|_|_|_ _|_|_|_ |_|__|_        |
    |    | | |                    |68901| |Z8530| |Z8530|        |
    |    | | |                    ------- ------- -------        |
    |    | | |                  (IOC)|      | |     | |          |
    -----|-|-|-----------------------|------|-|-----|-|-----------
         | | |                  _____|____ _|_|_____|_|_
         | | |                  |TTY PORT| | PORTS 0-3 |
         | | |                  ---------- -------------
    _____|_|_|___________________
    |    | | |________________  |
    |    | |_____|__________ |  |
    |    |_______|_|______ | |  |
    |           _|_|_|_ _|_|_|_ |
    |           |Z8530| |Z8530| |
    |           ------- ------- |
    |  (DCARD)    | |     | |   |
    --------------|-|-----|-|----
                  | |     | |
                 -------------
                 | PORTS 4-7 |
                 -------------

    9                               PICO Engine                  SERVICE MANUAL
    PHYSICAL DECRIPTION                                            May 27, 1988






                             3 -  PHYSICAL DECRIPTION







                                 3.1  FRONT PANEL


    Two status  indicators (RUN/GREEN  and DIAG STOP/RED)  are provided  on the
    front panel.  The Red LED is driven from the Reset signal for the M68010 on
    the IOC and lit whenever the  Reset line is pulled down.  Should  the Power
    On Self Diagnostic test fail it could either stay lit or toggle off and on.
    It should be  normally off.  The  Green LED is  driven from the  IOC M68010
    Halt signal and is extinguished  when Halt by assertion of the  Halt signal
    which will halt all execution of code.  It should normally be on.






                             3.2  FRONT PANEL DIAGRAM


    _____________________________________________________________________
    |                                                                   |
    |    [   RUN   ]                                                    |
    |                                                                   |
    |    [DIAG STOP]                                                    |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    ---------------------------------------------------------------------









    10                              PICO Engine                  SERVICE MANUAL
    PHYSICAL DECRIPTION                                            May 27, 1988


                                  3.3  REAR PANEL


         The rear  panel houses  an AC ON/OFF  switch, a  110VAC/220VAC in-line
    fuse module, an IEC line cord connector, a local TTY/CONSOLE I/O connector,
    a reset switch  for booting  and the connectors required to  interface with
    the various ports on the I/O board.  The I/O port connectors are:


         o  One (1)  9-pin  male subminiature-D connector for the TTY local
            port.

         o  Eight (8) 25-pin female subminiature-D connectors for SIO, SYNC
            or ASYNC ports 0 through 7.







                              3.4  REAR PANEL DIAGRAM


    _____________________________________________________________________
    |                                                                   |
    |                                                                   |
    | [COMM PORT 3] [COMM PORT 2]           [COMM PORT 1] [COMM PORT 0] |
    |                                                                   |
    | [COMM PORT 7] [COMM PORT 6]           [COMM PORT 5] [COMM PORT 4] |
    |                             [CONSOLE]                             |
    |  __________                                                       |
    |  | ON/OFF |    (BOOT)                                             |
    |  | <FUSE> |                                                       |
    |  |  [AC]  |                                                       |
    |  ----------                                                       |
    |                                                                   |
    ---------------------------------------------------------------------






                                  3.5  DIMENSIONS









    11                              PICO Engine                  SERVICE MANUAL
    PHYSICAL DECRIPTION                                            May 27, 1988


    Height:          5.75 inches

    Width:          17.75 inches

    Depth:          17.00 inches

    Weight:         30.00 pounds






                                3.6  ENVIRONMENTALS


    Operating temperature:  50 - 122 degrees F (10-50 degrees C)

    Relative humidity:      10 - 90 % noncondensing

    Altitude:               0 - 10,000 Ft (0-3000 meters)

    Heat dissipation:       340 British Thermal Units per Hour

    Minimal clearance:      5.0 inches - Front
                            5.0 inches - Rear
                            0.5 inches - Sides

    WARNING:  PICO intakes air for ventilation from the bottom left and
              expels heated air through the right side.    Do not stack
              units directly on top of each other!























    12                              PICO Engine                  SERVICE MANUAL
    COMMUNICATION INTERFACE                                        May 27, 1988






                           4 -  COMMUNICATION INTERFACE







                               4.1  PROTOCOL SUPPORT


         The IOC board with  a supplemental SCC daughter-card provides  8 ports
    for synchronous or asynchronous communication lines.  Zilog Z8530  SCCs are
    programmed by I/O instruction command pairs.  The command pair contains the
    values  to be  loaded  into the  SCC  write registers  which  determine the
    variations  in  protocols  and  I/O  channel  parameters  for  a particular
    application.  Any port may be configured to support start/stop asynchronous
    protocol at  programmed fixed frequencies  of 50 baud  to 9600  baud.  PICO
    ASYNC is actually emulated Tymnet SIO ASYNC.

         Byte  oriented synchronous  protocols  which transmit  data  in blocks
    composed of a header field, an information (data) field and a trailer field
    in half duplex  mode are supported by  any of the eight  PICO communication
    ports.  PICO nodes may be configured to utilize Tymnet TYMSYNC T201  or IBM
    type  Binary  Synchronous Communications  (BiSync)  protocols.   BiSync and
    Async modes of operation tend to be inefficient on PICO.  Operating PICO in
    Async and/or BiSync  modes dictates that not  all ports can be  serviced by
    the IOC processor!

         More efficient and higher speed bit oriented protocols  which transmit
    data in frames typically composed of an 8-bit flag sequence followed  by an
    address field, a control field, an information (data) field, a  frame check
    sequence (checksum) and an ending flag sequence are supportable on all PICO
    ports.  HDLC framed Tymnet T201 SIO, IBM SDLC and X.25 are  especially well
    implemented on ports 0 and 1  which utilize the M68450 DMAC for  high speed
    memory accesses and support high  speed V.35 interconnects at speeds  of up
    to 64K bps.  Ports 0 and 1 also support V.24 interconnects at speeds  of up
    to 19.2K bps.  Ports 2 through 7 shall never be driven at I/O rates greater
    than 9.6K bps in any mode (Async, BiSync, HDLC)!











    13                              PICO Engine                  SERVICE MANUAL
    COMMUNICATION INTERFACE                                        May 27, 1988


                              4.2  INTERFACE SIGNALS


         Handshaking signals (DTR, DSR or DCD, RTS, and CTS) are  available for
    all  ports  and can  be  monitored or  controlled  by  application programs
    running under the ISIS kernel.






                              4.3  INTERFACE STANDARD


         Interface signals on all  communication lines conform to  EIA RS-232-C
    interface standard.  Ports  0 and 1 are  designed to conform to  CCITT 1984
    LAPB  recommendations as  well  which makes  it  possible for  the  PICO to
    utilize 64K bps T1 channels.






                             4.4  MAXIMUM CABLE LENGTH



                                 Guaranteed Maximum
                                Length of Cable (ft)
              Data Rate            (40 pF/ft 6 mA)

                19,200                    10.0
                 9,600                    22.6
                 7,200                    31.3
                 4,800                    48.6
                 3,600                    66.0
                 2,400                   100.7
                 1,200                   204.8
                   300                   829.9
                   150                  1663.3
                   135                  1848.4
                   110                  2269.3
                    75                  3329.9
                    50                  4996.6

         To insure proper operation,  cable length must not exceed  the maximum
    length listed  above to maintain  that the RS-232C  specified slew  rate is
    equal to or  less than 4% of  the bit frame time  of any given baud  rate B
    [(.04)1/B)].  The dV  used to determine  these cable lengths  presumes PICO
    operates on EIA levels of +/- 12VDC  which it in fact, does.  Should longer


    14                              PICO Engine                  SERVICE MANUAL
    COMMUNICATION INTERFACE                                        May 27, 1988


    cable runs be  necessary simply use lower  capacitance cables.  20  pF/ft @
    6mA will double the cable run.   10 pF/ft @ 6mA will quadruple  the length.
    Actual laboratory testing detected no errors on 19.2K bps lines equal to or
    less than 15 Ft and 9.6K bps lines equal to or less than 25 Ft.






                              4.5  PORT CONFIGURATION


         A set of default channel configuration parameters resident in  IOC ROM
    is loaded onto IOC RAM during  the Power On Reset sequence to create  a set
    of SCC templates for each channel.  The current SCC configuration  is moved
    into the  Control Structure Array  in IOC RAM  which is interpreted  by the
    Firmware  and written  into the  SCC Write  registers.  A  default template
    exists for all SCC channels for HDLC, TYMSYNC and ASYNC modes of operation.
    The ASYNC  template will  always be moved  into the  RAM Control  Array and
    loaded into  all SCC  Write registers.  The  other templates  are available
    upon user demand.

                   SCC DEFAULT CONFIGURATIONS
                          PORTS 0 - 7

    ASYNC:       BAUD RATE          = 9600
                 TX CLOCK SOURCE    = BAUD RATE GENERATOR
                 RX CLOCK SOURCE    = BAUD RATE GENERATOR
                 TX CLOCK DIRECTION = INPUT
                 RX CLOCK DIRECTION = INPUT

    TYMSYNC:     BAUD RATE          = 9600
                 TX CLOCK SOURCE    = BAUD RATE GENERATOR
                 RX CLOCK SOURCE    = RX CLOCK PIN
                 TX CLOCK DIRECTION = OUTPUT
                 RX CLOCK DIRECTION = INPUT

                          PORTS 2 - 7

    HDLC/INT:    BAUD RATE          = 9600
                 TX CLOCK SOURCE    = BAUD RATE GENERATOR
                 RX CLOCK SOURCE    = RX CLOCK PIN
                 TX CLOCK DIRECTION = OUTPUT
                 RX CLOCK DIRECTION = INPUT

                          PORTS 0 - 1

    HDLC/DMA:    BAUD RATE          = 9600
                 TX CLOCK SOURCE    = BAUD RATE GENERATOR
                 RX CLOCK SOURCE    = BAUD RATE GENERATOR
                 TX CLOCK DIRECTION = INPUT
                 RX CLOCK DIRECTION = INPUT

    15                              PICO Engine                  SERVICE MANUAL
    COMMUNICATION INTERFACE                                        May 27, 1988


         PICO provides three methods of altering SCC configurations.  The first
    method is by execution of  an Engine instruction that passes  Command Pairs
    down to the Firmware.  The Command Pairs are the result of  Channel Command
    Programs  issued  from  the  Node Code  or  slot  code.   The configuration
    parameters  dictated  by  the  Command Pairs  are  moved  into  the Control
    Structure constructed on  IOC RAM for the  appropriate SCC channel.  When a
    Command Pair is passed down that  writes to SCC Write register 4  (WR4) the
    configuration template  is actually  loaded into  the SCC  Write registers.
    Recall that PICO emulates the Engine SIO which utilizes Write registers WR0
    through WR7 therefore Node Code and slot programs only control  WR0 through
    WR7 of  the SCCs.  Baud  rate values and  clock sourcing controlled  by the
    higher SCC Write registers can  not be modified by Command  Pairs.  Command
    Pairs are used by the bootcode as well as ISIS codes for port configuration
    which is  how the bootcode  will configure certain  ports for  TYMSYNC with
    defined sync characters or framed HDLC.  The configuration is saved until a
    System Reset is  executed at which time  defaults are reloaded, or  until a
    new Channel Command Program with new Command Pairs is executed.

         The second method of configuring the SCCs is detailed in section  6 of
    this document under ENGbug Processes.  The "SD" services provide  access to
    the SCC Control Structure from  the local terminal.  A menu  driven routine
    prompts the user for  determination of protocols, baud rates,  transmit and
    receive clock sourcing and transmit clock line direction.  The changes made
    from ENGbug are not altered by System Resets.  The template defined  by the
    user input is written into the SCC Control Structure on IOC RAM  and loaded
    into the SCC Write registers after  an ENGbug "INI" command or when  an I/O
    instruction  is  sent  to  the  Firmware.  It  is  after  an  "INI"  or I/O
    instruction has been executed that the new SCC values can be displayed back
    by the "SD"  command.  Values defined by  the user via the  ENGbug facility
    will be written over by the ISIS at initialization time!  The "SD" services
    are most  properly used  by the Field  Engineers, Developers  and component
    level repair technicians.

         The third method uses an interface between the IOC and the  EP defined
    as Channel 0.  This is not  SCC channel 0 but a specially reserved  area of
    memory as a  Command and I/O block  from EP address F0000x  through FFFFEx.
    Communication across the Channel  0 block generates ATN2 interrupts  to the
    EP.  ISIS provides a new "NAN.M" macro that allows the Protocol, Baud rate,
    transmit  clock  source,  receive  clock  source  and  transmit  clock line
    direction and source.  The ISIS default SCC templates are modeled after the
    Firmware templates.  Most notable is that the default clock values  are all
    9600 baud.  PICO does not support concurrent operation of all ports at 9600
    baud!  When generating software for  the PICO always define SCC  baud rates
    and modes of operation.   Refer to the weighting factors  and configuration
    limits defined in section 9, Performance Capabilities.  ISIS  constructs an
    I/O Control Block and a  Configuration Array in main EP memory.   ISIS code
    writes a 01 (STRTIO) into  EP address F0021x which generates the  Channel 0
    Start I/o interrupt to the  IOC.  The IOC Firmware will write  the template
    in memory onto IOC RAM into the SCC Control Structure which again,  will be
    loaded  into  the SCC  Write  registers at  the  next System  Reset  or I/O
    instruction.   The  Start  I/O  bit  is  actually  set  to  01  during ISIS
    intialization so the ISIS defined SCC values are actually set up before the
    Node Code or slot code Channel Command Programs run.

    16                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988






                                 5 -  INSTALLATION







                                   5.1  AC POWER


         The AC  power connector utilizes  the industry standard  IEC connector
    configuration.   This  allows for  interchangeable  line  cords simplifying
    U.S.A. and non-U.S.A. installations.


                   POWER SUPPLY CHARACTERISTICS


                      USA        |          INTERNATIONAL


    VOLTAGE:             115 VAC |  230 VAC


    FREQUENCY:          47/63 Hz  |  47/63 Hz


    OPERATING RANGE:  90/132 VAC  |  180/264 VAC


    NOMINAL CURRENT:   3 AMPERES  |  1.5 AMPERES


    MAXIMUM CURRENT:  17 AMPERES  |  17 AMPERES


         The PICO-engine  can use either  115VAC or 230VAC  (nominal), 47-63Hz,
    single-phase input power.  Conversion of a PICO-engine wired for  one input
    voltage to the other requires the following be performed:










    17                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


         1.  INVERT THE FUSE MODULE TRAY!      The in-line fuses are designed 
             to protect  the internal wiring from catastrophic failure.   The
             PICO AC power switch comes with a pair of 250 VAC  in-line fuses
             in a slide out module.  Directly below the power cord receptacle
             is a small index or notch in the fuse module.     With the power
             cord removed, the fuse tray is extracted by simply   applying  a
             small   instrument such as an alignment tool into the index  and
             prying   outward.  The fuse tray is simply removed, inverted and
             reinstalled into the AC power switch.    When configured for 110
             VAC  the rear panel of the tray will read 110-120V right-side-up, 
             whereas 220-240 will appear up-side-down! Of course, the reverse 
             is true when configured for 220 VAC.  There is another AC   fuse
             factory installed (250V @5A) to protect the power supply  trans-
             former and another (250V @3A) to  protect  the   down-stream  DC
             components.  The factory installed fuses are not intended to  be
             field servicable and should they blow the power supply should be
             swapped out as a single component.  The in-line AC fuses located
             in the power switch are easily servicable and should be replaced
             on site if blown only by an experienced Field Engineer  who  can
             examine for signs of wiring or component damage  and  check  for
             any shorts with a volt-meter (either analog or digital).    When
             applying power the service technician may verify the proper line
             voltage is present for the power supply at the point TB1 on  the
             power supply proper.  PIN 1 is GROUND for reference,  PIN  2  is
             NEUTRAL and PIN 3 is LINE voltage in.   Referencing from  GROUND
             PIN 1 to LINE PIN 3 the measurement should  equal  the  expected
             line voltage. When suspecting a bad power supply it is necessary
             to verify the proper input voltages.    If proper AC voltage can
             be measured here, visually verify that both  factory   installed
             fuses are not blown.  These are both readily observed from   the
             component side of the power supply. If uncertain, disconnect the
             power cord and simply perform a continuity test with a voltmeter.
             When powered up and under load (the EP and IOC boards installed)
             the output voltages can be measured at TB2 on the power  supply.
             TB2-PIN 6 may be used for a common reference.   TB2 PINs 1 and 2
             should measure 5.10 VDC out.  EIA voltages may be verified    at
             TB2-PIN 7 (+12.0 VDC) and TB2-PIN 8 (-12.0 VDC).

         2.  CHANGE THE FANS?   No!  Fans are DC powered.

         3.  USE THE PROPER INPUT TAP ON THE DC POWER SUPPLY.          The DC
             supply has labelled  input taps for  110 VAC and 220 VAC    line 
             voltages.   Using the inappropriate tap can destroy  the  supply
             AND the circuit boards.   W1 is the strap for 110V/220V configur-
             ations. W1 is jumpered to the 110 input tap for 110VAC or to the
             220 tap adjacent to itself for 220VAC operations.  Another strap
             exists at W4 for the EIA voltage output.      Verify that it  is
             connected to the +12 VDC post on the power supply and not the 24
             VDC post.  This is located adjacent to the large transformer  in
             centre of the power supply.

         4.  POWER FAIL DETECT THRESHOLD.  A power-fail signal is provided at
             the TB2-PIN 9 terminal.  This signal is normally a TTL high level

    18                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


             of 5.0 VDC.  This signal goes TTL low 5 msec before the +5.0 VDC
             main output drops 5% at a 100% load condition.    This signal is
             not utilized in initial PICO Engines but can be useful  to Field
             Engineers experiencing power related problems.     Measuring the
             voltage  out  at  TB2-PIN 9  can help to identify power problems.
             TB2-PIN 6 can be used for a common reference point of measurement.

         5.  POWER SUPPLY TRIM POTS.   Two variable resistors are provided on
             component side of the power supply located adjacent to the DC out
             TB2 terminal block.   R35 is for adjusting the PFT   (power fail
             threshold.  As this is unused by PICO do not attempt to adjust it!
             R50 is for adjusting the +5 VDC output voltage measured  at  TB2-
             PIN1 and PIN2.  With the AC power cord disconnected  measure  the
             resistance across R50.   Adjust it to 392 ohms.      Power on and
             measure the actual +5 VDC level out.  A convenient GROUND post is
             provided on the PICO IOC board by IC location 10K.  Measuring the
             DC output at TB2 PIN   1 and PIN   2 with  the  voltmeter  ground
             referenced on the IOC,  set the trim pot to provide 5.10 VDC out.
             This will provide 5.05 VDC across the EP board installed below the
             IOC.   Use a light touch when adjusting the pot! The voltage must
             be adjusted and measured while under load which means that the IOC
             and EP boards will  be  installed.   Do not turn the pot radically
             or excessively high DC levels could be presented to the PICO board
             components!  Rotating  the pot clockwise will increase the +5 volt
             level out,  reduction is acheived by counterclockwise rotation.

    WARNING: NEVER, UNDER ANY CIRCUMSTANCES, REMOVE OR INSTALL ANY PICO PRINTED
             CIRCUIT BOARDS OR COMPONENTS WHILE AC POWER IS SWITCHED ON!







                          5.2  BBU - BATTERY BACKUP UNIT


    Not available at this time.  BBU is currently under development.















    19                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


                               5.3  BOARD STRAPPING







                            5.4  EP HARDWARE STRAPPING


         This Service Manual  dictates the selection  of 75 various  jumper and
    switch hardware strapping options.  Before attempting to bring up  the PICO
    for the first time stop  and methodically verify ALL straps  are configured
    as described in this  document!  The strap suggestions reflect  the default
    boot strategy and Firmware  SCC soft strap defaults.  The  default strategy
    will output transmit clocks on ports 2 and 3 (DB25 pin 15) at 9600 baud and
    expect receive clocks (DB25  pin 17) be input  from the line at  9600 baud.
    Ports 0  and 1  expect to have  BOTH transmit  and receive  clocks provided
    externally.  Ports  4 through 7  are not scanned  for downline-load-records
    but strapping  selections are  prescribed for them  as well  for operations
    under the ISIS control.  As there  are only 4 jumpers on the EP,  begin the
    strapping procedure here and move on to the more involved IOC board and SCC
    card straps.


         The 3-slot backplane  in the PICO  Engine requires no  strapping.  The
    backplane simply provides  the PICO PCBs with  power, ground and a  base to
    install them in so there is  no required order from top to bottom  that the
    boards must be installed in.  If performing component level troubleshooting
    on the EP is logical to  install the IOC and its piggybacked SCC  card into
    the lowest backplane slot and the EP into the uppermost slot.  Normally the
    backplane  will  have  the  EP  installed in  slot  2  (as  stamped  on the
    backplane) and the IOC installed in the uppermost slot (also stamped on the
    backplane).  Conforming to this convention is logical and appropriate as it
    facilitates convenient access to all IOC and SCC hardware straps  by simply
    removing the PICO cover without having to power down the system  and remove
    the boards to restrap or even verify existing straps.    Switch settings on
    the EP board are as follows:






    E1  [Normal/Test Clock Select]  OPEN
    E2  [Single Step Push Button ]  OPEN
    E3  [Invert PROM data        ]  CLOSED A-B
    E4  [PROM Addressing         ]  CLOSED B-C





    20                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


                          5.5  IOC/SCC HARDWARE STRAPPING


         The  PICO IOC  board  and the  4 port  daughter-card  contain numerous
    switches and stake posts  to facilitate configuration of  various operating
    parameters.   The  following  strapping guide  will  reflect  the  SCC soft
    strapping set up by the Firmware at the System Power On initilization time.
    Properly strapped, the PICO can  actually be powered on, cabled  and loaded
    with little or no assist from the operator!  The default IOC  routines will
    expect that channels  0 and 1 will  have an external clock  source provided
    such as would be provided from  a Synchronous modem or a V.35  Digital Data
    Set.  Channels 2 through 7 are programmed to output a 9600  baud internally
    sourced transmit clock.  Input control  signals DCD or DSR may  be selected
    by hardware jumpers and will be presented to the Z8530 SCCs DCD input pins.
    When connected to modems it is appropriate to configure the ports  to "look
    at" DCD  input, when connected  to user DTEs  DSR input is  the appropriate
    selection.  Straps  for channels  0-3 are  resident on  the main  IOC board
    proper.   Straps  for channels  4-7  are to  be  found on  the  4  port SCC
    daughter-card.  For standardization  all PICO Engines  will be sent  to the
    field with this configuration:


































    21                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


    REMEMBER:  CHANNEL 0 THROUGH 3 STRAPS ARE LOCATED ON THE IOC BOARD!!!

    CHANNEL 0

    E24-E25 | NORMALLY CLOSED | INPUT DSR
    E23-E24 | NORMALLY OPEN   | IGNORE DCD
    E13-E14 | NORMALLY CLOSED | INPUT RS-232C/V.24 LEVEL RD (PIN 3)
    E14-E15 | NORMALLY OPEN   | IGNORE V.35 LEVEL RDP/RDS (PINS 21/22)
    E80-E81 | NORMALLY OPEN   | IGNORE INTERNALLY SOURCED TC
    E81-E82 | NORMALLY CLOSED | INPUT RS-232C/V.24 LEVEL EXT TC (PIN 15)
    E16-E17 | NORMALLY CLOSED | INPUT TTL LEVEL TC TO SCC
    E17-E18 | NORMALLY OPEN   | IGNORE V.35 LEVEL TCP/TCS (PINS 9/10)
    E95-E96 | NORMALLY OPEN   | ISOLATE ON BOARD TC/RC SIGNALS
    E10-E11 | NORMALLY CLOSED | INPUT RS-232C/V.24 LEVEL RC (PIN 17)
    E11-E12 | NORMALLY OPEN   | IGNORE V.35 LEVEL RCP/RCS (PINS 23/24)

    NOTE:  There are NO straps for Transmit Data signals!  Transmit Data out
           is always level shifted and output to PIN 2 for RS-232C and  PINS
           11/12 for V.35 Primary/Secondary TD.   Should TC and RC be needed
           for port 0, remove E16-E17 and install E80-E81 and E95-E96(for RC).

    CHANNEL 1

    E29-E30 | NORMALLY CLOSED | INPUT DSR
    E30-E31 | NORMALLY OPEN   | IGNORE DCD
    E35-E36 | NORMALLY CLOSED | INPUT RS-232C/V.24 LEVEL RD (PIN 3)
    E36-E37 | NORMALLY OPEN   | INGNORE V.35 LEVEL RDP/RDS (PINS 21/22)
    E77-E78 | NORMALLY OPEN   | IGNORE INTERNALLY SOURCED TC
    E78-E79 | NORMALLY CLOSED | INPUT RS-232C/V.24 LEVEL EXT TC (PIN 15)
    E38-E39 | NORMALLY CLOSED | INPUT TTL LEVEL TC TO SCC
    E39-E40 | NORMALLY OPEN   | IGNORE V.35 LEVEL TCP/TCS (PINS 9/10)
    E97-E98 | NORMALLY OPEN   | ISOLATE ON BOARD TC/RC SIGNALS
    E26-E27 | NORMALLY CLOSED | INPUT RS-232C/V.24 LEVEL RC (PIN 17)
    E27-E28 | NORMALLY OPEN   | IGNORE V.35 LEVEL RCP/RCS (PINS 23/24)

    NOTE:  It should be readily obvious that ports 0 and 1 are now configured
           to operate on EIA RS-232C/CCITT V.24 levels.   Either port can  be
           individually strapped for CCITT V.35 operation by  modifying  only
           3 jumpers for each port.   For port 0 remove the jumpers installed
           at locations E10-E11, E13-E14 and E16-E17 and install them on  the
           stake posts E11-E12, E14-E15 and E17-E18.  Port 0 is now ready  to
           connect to a DDS.  For port 1 remove the jumpers installed at E26-
           E27, E35-E36 and E38-E39 and install them on the posts at E27-E28,
           E36-E37 and E39-E40.  No other ports support V.35 interfaces.










    22                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


    CHANNEL 2

    E7 - E8 | NORMAllY OPEN   | IGNORE DCD
    E8 - E9 | NORMALLY CLOSED | INPUT DSR
    E91-E92 | NORMALLY OPEN   | ISOLATE BOARD TC/RC SIGNALS-INPUT RC (PIN 17)
    E85-E86 | NORMALLY OPEN   | IGNORE EXTERNALLY SOURCED RS-232C/V.24 TC
    E93-E94 | NORMALLY CLOSED | OUTPUT RS-232C/V.24 LEVEL TC (PIN 15)

    CHANNEL 3 

    E5 - E6 | NORMALLY OPEN   | IGNORE DCD
    E4 - E5 | NORMALLY CLOSED | INPUT DSR
    E87-E88 | NORMALLY OPEN   | ISOLATE BOARD TC/TC SIGNALS-INPUT RC (PIN 17)
    E83-E84 | NORMALLY OPEN   | IGNORE EXTERANLLY SOURCED RS-232C/V.24 TC
    E89-E90 | NORMALLY CLOSED | OUTPUT RS-232C/V.24 LEVEL TC (PIN 15)

    REMEMBER:  CHANNEL 4 THROUGH 7 STRAPS ARE LOCATED ON THE SCC DCARD!!!

    CHANNEL 4

    E1 - E2 | NORMALLY OPEN   | IGNORE DCD
    E2 - E3 | NORMALLY CLOSED | INPUT DSR
    SW 2D-4 | NORMALLY OPEN   | ISOLATE BOARD TC/RC SIGNALS-INPUT RC (PIN 17)
    SW 2B-1 | NORMALLY OPEN   | IGNORE EXTERNALLY SOURCED RS-232C/V.24 TC
    SW 2B-2 | NORMALLY CLOSED | OUTPUT RS-232C/V.24 LEVEL TC (PIN 15)
    SW 4A-1 | NORMALLY CLOSED | CONSTANT SPEED ASYNC BAUD RATE SELECT
    SW 4A-2 | NORMALLY OPEN   | SPLIT SPEED ASYNC DISABLED



    CHANNEL 5

    E4 - E5 | NORMALLY OPEN   | IGNORE DCD
    E5 - E6 | NORMALLY CLOSED | INPUT DSR
    SW 2D-5 | NORMALLY OPEN   | ISOLATE BOARD TC/RC SIGNALS-INPUT RC (PIN 17)
    SW 2B-3 | NORMALLY OPEN   | IGNORE EXTERNALLY SOURCED R2-232C/V.24 TC
    SW 2B-4 | NORMALLY CLOSED | OUTPUT RS-232C/V.24 LEVEL TC (PIN 15)
    SW 4A-3 | NORMALLY CLOSED | CONSTANT SPEED ASYNC BAUD RATE SELECT
    SW 4A-4 | NORMALLY OPEN   | SPLIT SPEED ASYNC DISABLED



    CHANNEL 6

    E7 - E8 | NORMALLY OPEN   | IGNORE DCD
    E8 - E9 | NORMALLY CLOSED | INPUT DSR
    SW 2D-6 | NORMALLY OPEN   | ISOLATE BOARD TC/RC SIGNALS-INPUT RC (PIN 17)
    SW 2B-6 | NORMALLY OPEN   | IGNORE EXTERNALLY SOURCED RS-232C/V.24 TC
    SW 2B-5 | NORMALLY CLOSED | OUTPUT RS-232C/V.24 LEVEL TC (PIN 15)
    SW 4A-5 | NORMALLY CLOSED | CONSTANT SPEED ASYNC BAUD RATE SELECT
    SW 4A-6 | NORMALLY OPEN   | SPLIT SPEED ASYNC DISABLED



    23                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988



    CHANNEL 7

    E10-E11 | NORMALLY OPEN   | IGNORE DCD
    E11-E12 | NORMALLY CLOSED | INPUT DSR
    SW 2D-7 | NORMALLY OPEN   | ISOLATE BOARD TC/RC SIGNALS-INPUT RC (PIN 17)
    SW 2B-7 | NORMALLY OPEN   | IGNORE EXTERNALLY SOURCED RS-232C/V.24 TC
    SW 2B-8 | NORMALLY CLOSED | OUTPUT RS-232C/V.24 LEVEL TC (PIN 15)
    SW 4A-7 | NORMALLY CLOSED | CONSTANT SPEED ASYNC BAUD RATE SELECT
    SW 4A-8 | NORMALLY OPEN   | SPLIT SPEED ASYNC DISABLED


    NOTE:  There are no straps for control signals CTS (INPUT), DTR (OUTPUT)
           or RTS (OUTPUT).  These are always propagated if presented  to/by
           interfaces.


         There are no  other jumpers or switches  for the 4 port  SCC daughter-
    card but there  are additonal hardware straps  on the IOC board.   Some are
    for the development effort,  some are for further board  configurations and
    some are of  no significance.  For instance,  the 8 position  dip-switch at
    board IC  location 1K for  addressing the TSI  SPIRIT GATE ARRAY  should be
    totally removed from the PICO IOC board.  The following lists the remaining
    "interesting" straps:

    E1 - E2 | NORMALLY OPEN   | IGNORE CONSOLE TERMINAL DCD
    E2 - E3 | NORMALLY CLOSED | INPUT CONSOLE TERMINAL DSR
    E19-E20 | NORMALLY OPEN   | POWER ON SELF-TEST DIAG ENABLE
    E21-E22 | NORMALLY OPEN   | DIAGNOSTIC TEST ENABLE
    E33-E34 | NORMALLY CLOSED | BUSS ERROR ENABLE
    E41-E42 | NORMALLY OPEN   | UNUSED
    E42-E43 | NORMALLY CLOSED | WATCH DOG TIMER ENABLE
    E71-E72 | NORMALLY CLOSED | 19.6608 MHz CLOCK ENABLE
    E73-E74 | NORMALLY CLOSED | 19.6608 MHz CLOCK ENBALE
    E75-E76 | NORMALLY CLOSED | MEMORY SIZE SELECT
    E99-100 | NORMALLY OPEN   | CONNECT TO REAR PANEL BOOT SWITCH

    All other remaining stake posts and jumpers are to be left open or  off.
    Notice that some of the stake posts provide GROUND reference and O-scope
    test points.














    24                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


                              5.6  PROM/PAL REFERENCE


         Much  of the  logic on  the  PICO is  implemented through  the  use of
    programmable  devices.  PICO  has a  total of  thirtythree PALs  and twelve
    PROMs.  After verifying the hardware  straps, stop and verify the  PALs and
    PROMs installed in your machine  are of the appropriate part  number and/or
    checksum:

                      **  EP PALS   **


    Location             Checksum             Designator

       9B                  3276               PAL AIEBA [PCMUXCNTL]
       8AA                 90E1               PAL AUCXA [CLOCK SRC]
       8C                  AB19               PAL AADSA [IEU MISCT]
       8D                  65C0               PAL AVCYA [DDESTCNTL]
       8E                  9871               PAL AWCZA [DSRC CNTL]
       8H                  226C               PAL ATCWA [BMUX CNTL]
       7F                  7657               PAL ACEKA [INT LATCH]
       7H                  98DC               PAL APEHA [ALU   WR1]
       7K                  9372               PAL AJECA [   PSW   ]
       7L                  9372               PAL AJECA [   PSW   ]
       6F                  9FB6               PAL ADELB [INT PRIOR]
       6H                  0F81               PAL ARCTA [ALU   WR2]
       6J                  82FF               PAL AEEMA [MAC  CNTL]
       3F                  0B06               PAL AXDAA [GRP DECOD]
       3H                  4176               PAL ABDTA [INT DECOD]
       3L                  6B56               PAL AKEDA [REGIS SEL]
       3M                  865F               PAL ANEGA [YS REGIST]
       2H                  0AF9               PAL ASCVA [ARBITRATE]
       2J                  A208               PAL AFENA [MEM TIME1]
       2M                  6D8D               PAL AMEFA [YD   CNTL]
       1H                  0E4D               PAL ALEEA [REFSH REQ]
       1J                  DDB7               PAL AGEPA [MEM TIME2]
       1K                  805C               PAL AHERA [PC1-2CNTL]

                       **  EP PROMS   **

       7M                  F732               PROM IDAFA [TSIMAP1]
       6M                  0264               PROM ICAFA [TSIMAP0]
       9C                  96E3               PROM MACDA [u -CODE]
       9D                  9318               PROM MBCDA     "
       9E                  8D28               PROM MCCDA     "
       9F                  FC37               PROM MDCDA     "
       9H                  9A74               PROM MECDA     "
       9J                  64C5               PROM MFCDA     "
       9L                  82B8               PROM MGCDA     "
       9M                  CF2A               PROM MHCDA     "




    25                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988



                     **   IOC PALS   **
       
       11H                 02CC               790246-001 [INT THROTTLE]
       10H                 832E               790276-001 [    DTACK   ]
       10K                 6048               790277-001 [SCC  CONTROL]
       9H                  6631               790275-001 [PRE   DETACK]
       9K                  7518               790274-001 [   MISCL    ]
       8C                  6877               790216-001 [PORT BIT MAP]
       8E                  6379               790214-001 [PERIPHER DEC]
       8K                  511B               790217-001 [INTERRUPTACK]
       4F                  5B41               790273-001 [MEMORY DECOD]
       2M                  E92A               790245-001 [S-BUS   INTF]

                     ***   PROMS  ***

       5H                  0DB7               EVEN  [RESIDENT]
       5L                  6465               ODD   [FIRMWARE]

    WARNING:  Do not attempt to reseat or replace ICs while PCBs are
              installed in PICO!      Downward  pressure  will cause
              excessive flex in  PCBs and result in damage to traces
              and solder joints.






                          5.7  PICO ECO REFERENCE LEVELS


         Version 1.5 of PICO has 3 ECO level and 4 PLC level modifications.  At
    this date the PICO revision levels will be:  EP (470285-001) REV E  and IOC
    (470298-001) REV E.  In the  field simply verify the proper  board revision
    level for a quick check of the following rework:


               **    EP  ABC# 470285-001    **

    ECO# 87-020 REV A
    ECO# 87-122 REV B
    ECO# 88-049 REV C


                **    IOC ABC# 470298-001    **

    PLC#   87-157 REV A
    PLC#  88-P009 REV A
    PLC# 88-P040A REV C
    PLC#  88-P093 REV D



    26                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


                                  5.8  PCB CABLES


         Three  ribbon  cables  are   provided  for  EP  board  to   IOC  board
    interconnect and two more for  IOC board to SCC card interconnect.   The EP
    to IOC cable connectors are keyed to fit indexed PCB connector receptacles.
    EP connector J3 is cabled to IOC connector P3, EP-J4 to IOC-E4 and EP-J5 to
    IOC-P5.  IOC connector J5 is cabled to SCC connector J5 and IOC-J6  to SCC-
    J6.

         IOC PCB I/O connectors J0 through J4 are cabled to the PICO rear panel
    communication ports 0-3 and the TTY port.  J0 is connected by a flat ribbon
    connector to Port 0, J1 to Port 1 and J4 to the TTY port.  J3  is connected
    to Port 3 with 22  gauge wire as is J2  to Port 2.  SCC I/O  connections to
    rear panel port sare made via ribbon connectors from SCC-PB1 to Port 4, PB2
    to Port 5, PB3 to Port 6 and PB4 to Port 7.






                              5.9  SPECIAL EQUIPMENT


         PICO Front Panel Display and TTY I/O processes are Firmware driven and
    require a 1200 baud CRT display terminal.  Thermal printers like  the 125s,
    126s, 127s (Silent 700) are  of little value with PICO.  The  virtual Front
    Panel  will output  continously while  emulating the  Engine  Console!  The
    terminal requires  a special 9-pin  female to 25-pin  male EIA  cable, part
    number 160319-001  which should  be added to  the tool  kit just  for PICO.
    PICO  does have  a  receptacle which  could  have a  standard  25-pin  male
    connector but  the nonstandard  9-pin should  tend to  discourage customers
    from connecting  their own  terminals to PICO  and accessing  the debugging
    facilities too quickly.  An alignment tool or small screwdriver is required
    for power supply adjustments along  with a DVM.  The Field  Engineer should
    ALWAYS have a  breakout box with good  batteries or charger to  monitor EIA
    signals and loopback  testing.  A small antistatic  mat to lay the  PCBs on
    for IC  reseating and strapping  is also quite  appropriate.  Added  to the
    standard  communications  tool  kit,  the  Field  Engineer  should  be well
    prepared to service PICO.













    27                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


                                5.10  LOADING PICO


         Install  a  1200  baud  terminal  or  terminal  emulator  strapped  as
    described  in the  first  paragraph of  the Console  Processes  chapter and
    consider the loading  sequence from the moment  of power on.   Observe that
    both the GREEN (RUN) and RED  (DIAG STOP) LED's are turned on  when powered
    on.  The GREEN  LED should stay  on and the  RED should be  extinguished in
    less than one second and remain off.  If the RED LED continues to  flash on
    or stays on solidly stop and recheck all previous straps to verify there is
    no operator error and then recheck the TTL voltages present on the IOC PCB.
    The voltage can be safely and quickly measured across a TTL device  such as
    is  located at  IC location  1A  from pin  10 (VSS)  to pin  20  (VCC).  If
    voltages are  proper and  strapping correct the  PICO requires  depot level
    troubleshooting and should  be swapped in the  field.  If the  LEDs display
    properly then proceed from here.


         The  Power  On  sequence  will  write  a  pattern  into  IOC   RAM  to
    differentiate  this  first  Power On  Reset  sequence  from  any subsequent
    hardware Resets which may occur.  The M68010 then initiates a  System level
    Reset which initializes  the DMAC, MFP  and SCC devices.   Interrupt vector
    tables are loaded from  IOC ROM to IOC RAM.   Default ROM values to  set up
    the Z8530 Write registers are moved into the SCC templates.   Templates are
    set up for HDLC, TYMSYNC and ASYNC modes of operation.  The  ASYNC template
    is actually loaded into the Control Structure of the SCCs.  The 600  Hz RTC
    is enabled from the MFP and the  WDT is turned on at this moment.   The WDT
    is actually  a 300 Hz  clock output from  MFP signal TBO  and will  run for
    approximately 3 seconds (slightly  less) before expiring.  At the  Power On
    Reset  sequence the  timer will  ALWAYS expire  within 3  seconds  of being
    enabled.  At the moment of expiration a level 7 NMI interrupt is  issued to
    the M68010 at which time the M68010 generates an autovector to the  level 7
    interrupt service routine which will look  for the flag set at the  time of
    powering on  indicating that this  is the very  first time the  machine has
    been  initialized  and  vectoring  to  the  boot.   Had  the  machine  been
    previously loaded (as indicated by that flag set during the first  power on
    sequence) and a BBU mechanism  available to maintain the code in  memory, a
    vector to the ISIS entry address  may have been issued instead of  the boot
    entry point.  The BOOT routine resident in ROM is written onto the  main EP
    memory at addresses  700x through 10E2x which  is where it is  now executed
    from.


         A temporarily  enable switch  referenced as "BOOT"  is located  on the
    rear panel of PICO.  This is actually a RESET switch which halts the Engine
    Processor execution  of code  (BOOT or ISIS)  thereby halting  all routines
    which could reset the WDT.  The BOOT switch will always produce the desired
    bootcode  execution provided  the WDT  is left  enabled.  For  BETATEST and
    sites experiencing crashes the WDT should be left turned off for debugging!
    This  will require  that  a user  physically  reboot the  machine  from the
    terminal when  necessary.  The risk  is that when  the WDT expires  and the
    bootstrap executed, the IOC and memory will be reset and pointers  that may
    have been useful for debugging will be lost!

    28                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


         When invoked, the BOOT relocates itself to high EP memory  between the
    block from EF000x through EFFFEx and executes from there.  Note  again that
    had PICO been  loaded with ISIS  code which uses  that area of  memory, the
    BOOT routine would  have overwritten it  destructively to the  ISIS.  After
    being relocated to high memory  the BOOT issues a non-destructive  write to
    all EP  memory.  The BOOT  issues CIO commands  which are presented  to the
    virtual Front Panel  Display driver for  the local terminal.   The terminal
    will display the current version of the PICO Firmware followed by  its date
    of  creation.  Directly  below the  version level  the  conventional Engine
    Front Panel output will be displayed.  The display will read 000000000> and
    then  EF070BA5E>  which  signifies  the  WDT  expiration  and   the  BOOT's
    successful relocation onto EP  high memory.  The BOOT then  issues periodic
    resets to  the WDT to  prevent it from  expiring and starting  the sequence
    over  again.  The  Front  Panel will  be updated  to  X00000021> indicating
    version 21  BOOT code is  running.  The X  will be  constantly incrementing
    from 0 to Fx as the BOOT scans for down-line-load records.  At  this moment
    disable the  WDT by entering  the command "wd  off[CR]" from  the terminal.
    Verify that  the WDT  is turned off  by enterring  the command  "wd[CR]" at
    which time WDT status will be displayed.


         The next step in the sequence is to halt the BOOT and perform the PICO
    Self-Tests.  Enter the command  "ini[CR]" at which point the  terminal will
    display Engine Stopped  followed by the current  PC, PSW with the  wait bit
    set, the 16 general  purpose registers and the disassembled  instruction in
    the location pointed to by the PC.  Next enter the special  Process Command
    Character  [CNTL]n two  times  in a  row  consecutively at  which  time the
    terminal will display the IOCbug  *> prompt.  At this moment stop and go to
    chapter 7 of  this document and execute  all Self-Tests as  instructed.  If
    successful return to here to proceed with the bring-up sequence.


         At  the conclusion  of Self-Test  9 the  terminal will  return  to the
    ENGbug prompt.  The  user will now proceed  with the BOOT which  was halted
    for Self-Tests.   Enter [CNTL]n two  more times to  return to  IOCbug mode.
    After execution of the Self-Tests the memory should be cleared out prior to
    loading any software.  Enter the command "bf 400000 800000  0000[CR]" which
    will do a block fill of  0's to memory and return the terminal  to ENGbug>.
    If not successful an error message  will be output to the terminal  and the
    unit  requires depot  level debugging.   If successful  the user  will then
    enter  ini[CR] from  the  terminal ENGbug  prompt followed  by  the command
    "boot[CR]"  at  which time  the  Front  Panel will  again  display  the now
    familiar EF070BA5E> followed by the X00000021> display.


         The  bootstrap  allows  PICO  to  accept  down-line-load  records over
    TYMSYNC or SIO V.24 lines connected to  ports 2 and 3.  Ports 0 and  1 will
    accept down-line-load records from  SIO V.24 and SIO V.35  lines.  Remember
    that ports 2 and 3 are outputting a transmit clock at 9600 bps and are well
    suited for being  hardwired with a cross-over  cable to a Tymnet  sync line
    providing another transmit clock at 9600 bps.  Ports 0 and 1  are expecting
    externally provided  transmit and  receive clocks and  are well  suited for


    29                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988


    being hardwired  to the  Tymnet SIO V.24  daughter-cards with  a cross-over
    cable, any synchronous modem from 2400 to 19,200 bps on an SIO V.24 line or
    any SIO V.35  line from 19,200  to 64,000 bps.  Ports  4 through 7  are not
    scanned  for down-line-load  records!   Perform the  appropriate  I/O cable
    interconnects at this time, load and execute the standalone  diagnostics as
    detailed in chapter  7 before attempting to  load actual ISIS  target code.
    The specified  diagnostics should  pass 100% error  free.  If  any failures
    occur return for depot level debugging.


         Received data on ports 0-3 is bufferred and scanned for a unique 3232x
    pattern and checksummed.  If the 3232x header is not received for  a period
    of 60  seconds the bootstrap  reinitializes the IOC  and issues a  reset to
    device address  80x (motherboard  reset) and  resumes scanning  for another
    3232x header on ports 0-3 again.   PICO has a 230x byte receive  buffer set
    up by  the bootstrap  which begins at  address EF420x.   The down-line-load
    records received can actually be displayed to the terminal by executing the
    command  "md  EF040 230[CR]"  for  HDLC/DMA channels.   To  display records
    received  on the  intrrupt driven  channels read  addresses  EF650x through
    EF69Ex.  These locations may  be zeroed out or  reset prior to the  load by
    executing the "bf 8EF420 8EF69E 0000" from the IOCbug process.  Examination
    during  the  load  will  display  the  "familiar"  LOAD  II   records.   If
    difficulties are  experienced during  the load  this is  a useful  piece of
    information to determine if data is actually being received properly on the
    line.  The  services provided by  the SD commands  detailed in  the Console
    Processes chapter are probably the most readily obvious and useful software
    tools  for monitoring the state of the channel being loaded.



























    30                              PICO Engine                  SERVICE MANUAL
    INSTALLATION                                                   May 27, 1988



            DOWNLINE LOAD RECORD FORMAT:

                3232  tt  0aaaaa  nn...nn  vvvv dddd
                
                where
                    tt = Record type
                            00    = Jump to address contained in the record
                            01-38 = Number of bytes to be  loaded into  RAM
                            80    = Dump Command.  Dump 38X bytes from  RAM

                    0aaaa = Address to Read/Write or Jump to.

                            01-38 = Number of bytes to be  loaded into  RAM

                    nn...nn = If  tt  is NOT 38X  then nnnn = data bytes in
                              load record.  
                              00-7F = Data bytes stored in RAM
                              80-85 = Data  bytes  following 80X  is stored
                                      into RAM.  
                              84xx  = xx bytes of 00 are stored into RAM
                              85xx  = bytes of FF are stored into RAM
                              86-FF = 00-7F.

                    vvvv = Vertical checksum (record type + address field +
                           38X data bytes).

                    dddd = Diagonal checksum (record type + address field +
                           vertical checksum).

            VERTICAL CHECKSUM ALGORITHM

                    o  Load 0 into Accumulator
                    o  Get 1/2 word of Data
                    o  XOR Data with Accumulator
                    o  Jump

            HORIZONTAL CHECKSUM ALGORITHM

                    o  Load 0
                    o  Get 1/2 word of Data
                    o  Rotate 16-bit Accumulator left
                         (High order-bit ==> Low order-bit)
                    o  XOR Data with Accumulator
                    o  Jump









    31                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988






                              6 -  CONSOLE PROCESSES







                              6.1  MODES OF OPERATION


         The PICO Engine CONSOLE is implemented by IOC Firmware  routines which
    comprise an IOC debugger, a TTY I/O port, an ENGINE debugger and the Engine
    Front Panel Console display.  A  1200 baud terminal is required to  use the
    soft  console  on PICO  Engine.   The  terminal will  connect  to  the DB-9
    subminiature male  connector provided at  the rear panel  of PICO  which is
    simply  an extension  of connector  J4 from  the IOC  board.   The terminal
    should be strapped for lower case, full duplex, 1 stop-bit, parity inhibit,
    8 bits with bit 8 equal to 0.  At System Power Up and System  Reset cycles,
    the terminal will  display the current version  number of IOC  Firmware and
    the  prompt ENGbug>.   The  operator may  switch routines  or  processes by
    enterring the  special Process  Control Character  [CNTL]n.  Upon  entry of
    [CNTL]n the  prompt will change  to TTY I/O.   Enterring [CNTL]n  again the
    user  will be  prompted  with IOCbug  *>.   Each time  the  Process Control
    Character is enterred  the current Process  context is saved  and suspended
    (such as outputting TTY I/O data and changing to IOCbug).  When the Process
    is reenterred  the process  context and  task(s) resume  from the  point at
    which they were suspended.  All  console processes and tasks are  under the
    control  of  a Monitor  which  controls process  arbitration  and interrupt
    services.

         If at any time the user  looses control of the Console for  any reason
    such as hardware  anomalies, software anomalies  or pilot error,  the reset
    switch  located at  Switch 1  on the  IOC board  can be  used to  reset all
    processes and restart the Monitor.  Switch 1 is presented to the rear panel
    of PICO as a BOOT switch but it only serves the purpose of a BOOT switch if
    the  WDT has  been  left enabled.   This  is catastrophic  to  any software
    processes being executed on PICO as all Engine execution is halted  and the
    user will have to manually  restart the program execution.  If the  WDT was
    left enabled the boot will have executed, writing over blocks of memory and
    requiring the Engine be reloaded!  TTY I/O generates interrupts to  the IOC
    and degrades PICO I/O performance.  Worse than this is the fact  that heavy
    TTY I/O can cause emulated sync I/O routines to loose their pointers and be
    forever lost!   The TTY port  is useful and  appropriate for use  at System
    Bring-up and debugging  periods but the user  must be certain to  perform a
    normal  DDT  logout and  return  the  Console to  the  ENGbug>  prompt when
    finished.  Whenever possible utilize  the remote logon through  the Network
    to DDT for Node Code and slot analysis.


    32                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988


                                    6.2  ENGBUG


         ENGbug processes provide access to the Engine registers,  main memory,
    WDT (watch dog timer), RTC  (real time 600 Hz clock), clock  interrupts and
    Engine execution.  Engine execution options include running with or without
    up to  8 breakpoints,  single-stepping, tracing  the last  128 instructions
    executed, booting and modifying the SCC write register values.   The ENGbug
    process supports backspacing[CNTL]h and XON/XOFF  (DC3/DC1) [CNTL]s/[CNTL]q
    flow control. From the ENGbug process the EP memory resources are presented
    as addresses  000000 to  0FFFFEx.  The low  address of  000000 is  the same
    address presented to IOC IOCbug processes as 800000x EP main memory).

                         ENGbug COMMANDS
    ENGbug > 
    ? [command]            Provides command descriptions( NYI)
                           Register commands
    BOOT                   Load and start Engine Boot
    BR [addr [;count]]...  Set or display breakpoints in Engine code
    CIO [switch]           Accept new 'switch'; display 'Front Panel' value
    DR                     Display Engine registers in hex
    DT                     Display Address Trace Buffer
    GD [addr]              Go Direct (without active breakpoints)
    GO [addr]              Go with breakpoints active
    GT addr                Go until temporary breakpoint
    GSS                    Go with trace buffer
    INI                    Initialize Engine
    MD addr [count]        Display Engine memory bytes(=>DDT R cmd)
    MDW addr [count]       Display Engine memory words
    MDI addr [count]       Disassemble Engine Memory
    MI                     Initialize all Engine RAM
    MS addr hex|ascii [hex|ascii...] Set Engine memory(=>DDT W cmd)
    NOBR [addr]...         Remove breakpoint(s)
    RBK [addr]             Go with breakpoints active
    RM reg [hex] [reg [hex]] Modify Engine register(s)
    RTC [on|off]           Turn real-time clock on or off
    RUN [addr]             Go Direct (without active breakpoints)
    SD [0-7]               Dump scc information
    TBOOT                  Boot Engine from TTY line(NYI)
    TR [count]             Trace Engine code
    TT addr                Trace Engine code to temp breakpoint
    WD [on|off]            Turn watchdog timer on or off
    VER                    Display Engbug and Engine uCode version number

    NOTE:  NYI = NOT YET IMPLEMENTED AS PER NTD

         Most of  the ENGbug commands  are quite literal  and provide  the user
    with powerful,  low-level debugging tools.   Caution needs to  be exercised
    when  invoking  any of  the  debugger level  commands.   For  example, just
    enterring  the  command  ver[CR]  to  display  the  Firmware  and microcode
    versions  will  halt all  Engine  processes and  then  display  the version
    information so the appropriate time  to record the version levels  would be


    33                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988


    prior to loading the machine  and bringing it up in the  Network.  Consider
    the  example below.   The virtual  Front Console  is displaying  the ENGbug
    process prompt  and directly below  it is the  Front Console  display which
    emulates the Standard Engine Console display.  Observe that  the Tachometer
    equals 82, the crash  count equals 1 and  the Node number equals  2774 (the
    same CIO commands are  issued to the virtual  soft console as they  are for
    the Engine console).   At the prompt the  command ver[CR] is  enterred, the
    desired information displayed and the node is brought down hard.


    ENGbug  : 
    082102774 > ver

        EP IOC Firmware V1.01     7/10/87
        PICO Engine Debugger   V1.03  05/06/88
        TSI Engine uCode V2.0   03/14/1987

    ENGbug> 
    Engine Stopped

         The same effect is true for DT (dissassemble address trace buffer) and
    DR  (display  Engine  PSD  and  current  general  registers).   Observe the
    example:

    ENGbug> dr

      PC = 0062E8     PSW = E2F1 = WIMtarSp cvgL         regset = F 

      R00  FFFFFFF6   R01  000098F0   R02  00000000   R03  03758688 
      R04  FFFFFFFF   R05  00000005   R06  FFFF88D4   R07  00000020 
      R08  000105DA   R09  00014F4E   R10  000126C6   R11  0006B400 
      R12  00000000   R13  000099AA   R14  00000008   R15  00000008 
    >0062E8  584002E0        L      R4, X'2E0',

    ENGbug> dt
     0126C6  0000            HC     X'0'
     014F4E  3F3F            COPY   R3, R15
     0105DA  0000            HC     X'0'
     000020  0000            H        JFFS       , .+X'6'
     0098F0  0000            HC of bounds

      PC = 0062E8     PSW = E2F1 = WIMtarSpcvgL         regset = F 

      R00  FFFFFFF6   R01  000098F0   R02  00000000   R03  03758688 
      R04  FFFFFFFF   R05  00000005   R06  FFFF88D4   R07  00000020 
      R08  000105DA   R09  00014F4E   R10  000126C6   R11  0006B400  
      R12  00000000   R13  000099AA   R14  00000008   R15  00000008

         The WDT  and RTC will  both be  turned on by  the Firmware  during the
    initial  power  on sequence.   To  determine  the state  of  the  WDT enter
    wdt[CR].  To alter the state of the timer enter wdt on[CR] or  wdt off[CR].
    Example:


    34                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988


    ENGbug  : 
    060002773 > wd
    Watchdog Timer is OFF
    003920000 > 
    *****Notice this command is nondestructive and the Front Console continued
         to update the normal running display.  The same is true for RTC******
    003920000 > rtc
    Real Time Clock is ON
    00C002773 > 

         To begin  a new Engine  program sequence the  current program  must be
    halted.  For example, if the PICO is running Engine ISIS code the user will
    enter the command ini[CR] to  clear out the Front Panel mailbox**,  the I/O
    mailbox and interrupt pending que.  A reset is issued to the Engine and IOC
    and Engine code is halted.  Next the user will enter the command  gd 70[CR]
    to restart the Engine at the ISIS entry address 70x.  GD starts  the Engine
    program at the specified address without setting breakpoints.  If gd[CR] is
    enterred without an address specified the program will start (or attempt to
    start) at the address dictated by the current PC (program counter).  Engine
    program execution wil continue until the  PSW wait bit is set or  a display
    register type command is issued.   Unless the user has set  breakpoints and
    intends to  run with breakpoints  enabled (at which  point the  Engine will
    halt  when  encounterred)  the  gd command  should  always  be  the command
    specified to begin program execution.

    **A note about the MAILBOX:

         I/O  between  the EP  and  IOC devices  is  implemented  through three
    mailboxes which  are special  areas of dedicated  Engine main  memory.  One
    mailbox is for messages from EP to IOC, one for IOC to EP messages  and one
    for EP to Console.  Engine  memory 370x through 38Ex and 3C0x  through 3CEx
    is  reserved for  the  mailbox transactions  and  may be  displayed  by the
    command md 370 60[CR] which will  read and dump 60x bytes of  data starting
    from  address 370x  to the  terminal.  The  EP will  write FF  into mailbox
    "cell" 380x to call the IOC.  The  IOC will write 7F into the same  cell to
    respond that  the call or  interrupt from the  EP is being  serviced.  380x
    (Interrupt Flag) is  reset to 00 when  the IOC completes the  service.  For
    IOC to EP calls, the IOC will write into mailbox "cell" 3C0x FF and  the EP
    will respond with the 7F to indicate interrupt received and being serviced.
    When complete the EP will reset the cell to 00.  Console interrupts  to the
    EP are generated  when the IOC writes  FF into mailbox "cell"  370x.  Again
    the EP will rewrite the cell to 7F while servicing the interrupt  and reset
    it to 00 when complete.

         The SD  (Dump SCC  information) command   permits the  user to  dump a
    snapshot of the current channel configuration and status from the terminal.
    It also provides one of the three methods of reprogramming or reconfiguring
    the Z8530 SCCs.  The current channel configuration and status  for channels
    0-7 can be obtained by the command sd "channel # 8-F"[CR].  The commands sd
    "channel #  0-7"[CR] will  return a menu  driven configuration  guide which
    will prompt the user for channel configuration selections.  This is a point
    where the user may select specific protocols, clock sources and baud rates.


    35                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988


    Be advised however  that the ISIS will  override any user  terminal defined
    parameters.  This is most useful under diagnostic conditions where programs
    like DSIO can not reconfigure the channels.  The following is an example of
    the information presented by the  sd command for channels operating  in the
    HDLC/DMA, HDLC/INT, TYMSYNC/INT and  ASYNC/INT modes.  Be advised  that the
    information presented by the "snapshot" is at the SCC channel level and may
    or may not actually represent  true line conditions!  For example,  the SCC
    channel may  have I/O clocks  present and be  transmitting data out  to the
    line driver associated with it but it has no "knowledge" of whether  or not
    the line driver is even installed!  Jumpers could be improperly positioned,
    cables could be  faulty, modems could be  failing, Telco could  be dropping
    out and all that the SCC "knows" is that it is transmitting.  Of course the
    receive statistics  should reflect the  actual conditions.  If  jumpers are
    off here or line problems  exist the receive data fields and  pointers will
    be somewhat static.  The only real verification of the state of the line is
    to physically intrude and install some sort of breakout or datascope off of
    the port associated with the channel in question!





































    36                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988


    ENGbug  :
    030920000 > sd 8

    SCC CHAN 0 STATUS: available, MODE: SIO Emulation, PROTOCOL: HDLC W/DMA
    TX_CLK_DIRECTION: TRxC_input, TX_CLK_LINE: TRxC, TX_CLK: TRxC, RX_CLK: RTxC
    BAUD RATE: 9600, RELOCATION: 1A400, LOWER LIMIT: 07920, WINDOW: 0670
    RX_PKT_CNT: 41730, RX_CCW_PTR-> LAST: 21D70, NEXT: 21D78, RX_STATE: ACTIVE
    TX_PKT_CNT: 31573, TX_CCW_PTR-> LAST: 21D54, NEXT: 00000, TX_STATE: STOPPED
    TX-> RECORD: 21E52, RECORD_SIZE: 4
    TX-> DAR: FFFFC7, MAR: 021E56, MTC: 0000, CSR: 01, CER: 00, ERR_CNT: 0
    RX-> DAR: FFFFC7, MAR: 0222B0, MTC: 00D0, CSR: 09, CER: 00, ERR_CNT: 0
    RX-> BFR: 21F70, BFR_SIZE: 410, FRAME: 222B4, RECORD: 222B8,RECORD_SIZE:80
    RX_OVERRUN_CNT: 0, RX_CRC_ERR_CNT: 0, RX_ABORT_CNT: 9, TX_ABORT_CNT: 0

    |--- Read Registers ---|  |------------- Write Registers -------------|
    00 01 02 03 10 12 13 15   00 01 02 03 04 05 06 07 09 10 11 12 13 14 15
    6C 07 80 00 00 FE 00 C0   18 79 80 D9 20 EB 00 7E 09 80 09 FE 00 07 C0
                              00 F9 80 D9 20 EB 00 7E 89 80 09 FE 00 07 C0

    081002773 > sd 9

    SCC CHAN 1 STATUS: available, MODE: SIO Emulation, PROTOCOL: ASYNC
    TX_CLK_DIRECTION: TRxC_input, TX_CLK_LINE: TRxC, TX_CLK: BRG, RX_CLK: BRG
    BAUD RATE: 9600, RELOCATION: 00000, LOWER LIMIT: 00000, WINDOW: 10000
    RX_CCW_PTR-> LAST: 00000, NEXT: 00000, RX_STATE: IDLE
    TX_CCW_PTR-> LAST: 00000, NEXT: 00000, TX_STATE: IDLE
    TX->BFR: 00000, RECORD: 00000, RECORD_SIZE: 0, XON: FF, XOFF: FF, XOFFed 0
    RX-> LAST_BUFFERLET: 00000, BUFFERLET: 00000, BYTE_CNT: 0, TIMER: 0

    |--- Read Registers ---|  |------------- Write Registers -------------|
    00 01 02 03 10 12 13 15   00 01 02 03 04 05 06 07 09 10 11 12 13 14 15
    44 07 86 00 00 0E 00 00   00 13 80 C1 44 68 00 00 09 00 51 0E 00 03 80
                              00 00 80 C1 44 68 00 00 09 00 51 0E 00 03 00
    006920000 > sd a

    SCC CHAN 2 STATUS: attention, MODE: SIO Emulation, PROTOCOL: TYMSYNC
    TX_CLK_DIRECTION: TRxC_output, TX_CLK_LINE: TRxC, TX_CLK: BRG, RX_CLK: RTxC
    BAUD RATE: 9600, RELOCATION: 00000, LOWER LIMIT: 00000, WINDOW: 10000
    RX_CCW_PTR-> LAST: 01E30, NEXT: 01E34, RX_STATE: ACTIVE
    TX_CCW_PTR-> LAST: 01E2C, NEXT: 00000, TX_STATE: ACTIVE

    |--- Read Registers ---|  |------------- Write Registers -------------|
    00 01 02 03 10 12 13 15   00 01 02 03 04 05 06 07 09 10 11 12 13 14 15
    68 07 90 00 00 FE 00 40   18 12 90 D1 10 EA FF FF 09 00 15 FE 00 03 40
                              00 12 90 D1 10 EA FF FF 09 00 15 FE 00 03 40

    081900000 > sd b

    SCC CHAN 3 STATUS: available, MODE: SIO Emulation, PROTOCOL: ASYNC
    TX_CLK_DIRECTION: TRxC_input, TX_CLK_LINE: TRxC, TX_CLK: BRG, RX_CLK: BRG
    BAUD RATE: 9600, RELOCATION: 64C00, LOWER LIMIT: 003A0, WINDOW: 0360
    RX_CCW_PTR-> LAST: 65080, NEXT: 650C0, RX_STATE: ACTIVE
    TX_CCW_PTR-> LAST: 64FD0, NEXT: 00000, TX_STATE: STOPPED

    37                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988


    TX->BFR: 65100, RECORD: 65113, RECORD_SIZE: 0, XON: 11, XOFF: 13, XOFFed 0
    RX-> LAST_BUFFERLET: 652E2, BUFFERLET: 652F0, BYTE_CNT: 0, TIMER: 23574786

    |--- Read Registers ---|  |------------- Write Registers -------------|
    00 01 02 03 10 12 13 15   00 01 02 03 04 05 06 07 09 10 11 12 13 14 15
    44 07 96 00 00 0E 00 80   00 13 90 C1 44 82 00 00 09 00 51 0E 00 83 80
                              00 11 90 C1 44 82 00 00 09 00 51 0E 00 83 80

    018002773 > sd c

    SCC CHAN 4 STATUS: available, MODE: SIO Emulation, PROTOCOL: ASYNC
    TX_CLK_DIRECTION: TRxC_input, TX_CLK_LINE: TRxC, TX_CLK: BRG, RX_CLK: BRG
    BAUD RATE: 9600, RELOCATION: 00000, LOWER LIMIT: 00000, WINDOW: 10000
    RX_CCW_PTR-> LAST: 00000, NEXT: 00000, RX_STATE: IDLE
    TX_CCW_PTR-> LAST: 00000, NEXT: 00000, TX_STATE: IDLE
    TX->BFR: 00000, RECORD: 00000, RECORD_SIZE: 0, XON: FF, XOFF: FF, XOFFed 0
    RX-> LAST_BUFFERLET: 00000, BUFFERLET: 00000, BYTE_CNT: 0, TIMER: 0

    |--- Read Registers ---|  |------------- Write Registers -------------|
    00 01 02 03 10 12 13 15   00 01 02 03 04 05 06 07 09 10 11 12 13 14 15
    44 07 A0 00 00 0E 00 00   00 13 A0 C1 44 68 00 00 09 00 51 0E 00 83 80
                              00 00 A0 C1 44 68 00 00 09 00 51 0E 00 83 00

    060900000 > sd d

    SCC CHAN 5 STATUS: available, MODE: SIO Emulation, PROTOCOL: ASYNC
    TX_CLK_DIRECTION: TRxC_input, TX_CLK_LINE: TRxC, TX_CLK: BRG, RX_CLK: BRG
    BAUD RATE: 9600, RELOCATION: 00000, LOWER LIMIT: 00000, WINDOW: 10000
    RX_CCW_PTR-> LAST: 00000, NEXT: 00000, RX_STATE: IDLE
    TX_CCW_PTR-> LAST: 00000, NEXT: 00000, TX_STATE: IDLE
    TX->BFR: 00000, RECORD: 00000, RECORD_SIZE: 0, XON: FF, XOFF: FF, XOFFed 0
    RX-> LAST_BUFFERLET: 00000, BUFFERLET: 00000, BYTE_CNT: 0, TIMER: 0

    |--- Read Registers ---|  |------------- Write Registers -------------|
    00 01 02 03 10 12 13 15   00 01 02 03 04 05 06 07 09 10 11 12 13 14 15
    44 07 A6 00 00 0E 00 00   00 13 A0 C1 44 68 00 00 09 00 51 0E 00 83 80
                              00 00 A0 C1 44 68 00 00 09 00 51 0E 00 83 00

    081002773 > sd e

    SCC CHAN 6 STATUS: available, MODE: SIO Emulation, PROTOCOL: ASYNC
    TX_CLK_DIRECTION: TRxC_input, TX_CLK_LINE: TRxC, TX_CLK: BRG, RX_CLK: BRG
    BAUD RATE: 4800, RELOCATION: BEC00, LOWER LIMIT: 003A0, WINDOW: 0360
    RX_CCW_PTR-> LAST: BF080, NEXT: BF0A0, RX_STATE: ACTIVE
    TX_CCW_PTR-> LAST: BEFD0, NEXT: 00000, TX_STATE: STOPPED
    TX->BFR: BF100, RECORD: BF113, RECORD_SIZE: 0, XON: 11, XOFF: 13, XOFFed 0
    RX-> LAST_BUFFERLET: BF26A, BUFFERLET: BF270, BYTE_CNT: 0, TIMER: 23287388

    |--- Read Registers ---|  |------------- Write Registers -------------|
    00 01 02 03 10 12 13 15   00 01 02 03 04 05 06 07 09 10 11 12 13 14 15
    44 07 B0 00 00 1E 00 80   00 13 B0 C1 44 82 00 00 09 00 51 1E 00 83 80
                              00 11 B0 C1 44 82 00 00 09 00 51 1E 00 83 80
    006900000 > sd f

    38                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988



    SCC CHAN 7 STATUS: available, MODE: SIO Emulation, PROTOCOL: ASYNC
    TX_CLK_DIRECTION: TRxC_input, TX_CLK_LINE: TRxC, TX_CLK: BRG, RX_CLK: BRG
    BAUD RATE: 4800, RELOCATION: 00000, LOWER LIMIT: 00000, WINDOW: 10000
    RX_CCW_PTR-> LAST: 00000, NEXT: 00000, RX_STATE: IDLE
    TX_CCW_PTR-> LAST: 00000, NEXT: 00000, TX_STATE: IDLE
    TX->BFR: 00000, RECORD: 00000, RECORD_SIZE: 0, XON: FF, XOFF: FF, XOFFed 0
    RX-> LAST_BUFFERLET: 00000, BUFFERLET: 00000, BYTE_CNT: 0, TIMER: 0

    |--- Read Registers ---|  |------------- Write Registers -------------|
    00 01 02 03 10 12 13 15   00 01 02 03 04 05 06 07 09 10 11 12 13 14 15
    44 07 B6 00 00 1E 00 00   00 13 B0 C1 44 68 00 00 09 00 51 1E 00 83 80
                              00 00 B0 C1 44 68 00 00 09 00 51 1E 00 83 00

         The two rows of Write Register values displayed for WR00-WR15 present
    on the first row the SIO initialization  values issued to the IOC via slot
    program CCPs (Channels Command Programs)comprised of CCWs (Channel Command
    Words) and translated to equivalent SCC   values by the Firmware which are
    presented directly below the first row.     It may or may not  be  obvious
    to the user but the SD "snapshot" information presents, in addtion to  the
    channel parameters,specific addresses of transmit and receive CCW pointers,
    DMA memory base offset values and receive buffer addresses in memory which
    the user may actual read via the "md" command under ENGbug processes.  This
    is most useful in troubleshooting line and interface problems when the user
    can actually monitor the down-line-load records and line reset packets that
    are being written into memory before the machine even comes up!

         Next observe an example of using the SD command to reconfigure channel
    parameters for high-speed HDLC/DMA with a 56KBps DDS (Digital Data Set):

























    39                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988



    PICO Engine Debugger   V1.01  02/18/88

    ENGbug> sd 0

    SCC Channel 0 ASYNC Baud Rate Generator: 9600, WR11: 50.
    Receiver clock source: BRG, Transmitter Clock source: BRG.
    Transmit Clock Line TRxC_input sourced by EXTERNAL SOURCE.
    SCC Channel 0 TYMSYNC Baud Rate Generator: 9600, WR11: 08.
    Receiver clock source: RTxC, Transmitter Clock source: TRxC.
    Transmit Clock Line TRxC_input sourced by EXTERNAL SOURCE.

    SCC Channel 0 HDLC Baud Rate Generator: 9600, WR11: 08.
    Receiver clock source: RTxC, Transmitter Clock source: TRxC.
    Transmit Clock Line TRxC_input sourced by EXTERNAL SOURCE.


    SCC Channel 0 HDLC W/DMA Baud Rate Generator: 9600, WR11: 08.
    Receiver clock source: RTxC, Transmitter Clock source: TRxC.
    Transmit Clock Line TRxC_input sourced by EXTERNAL SOURCE.

    Present active channel protocol is ASYNC.
    Which protocol are you interested in?

        (A) ASYNC
        (B) TYMSYNC
        (C) HDLC
        (D) HDLC With DMA Data Transfers
        (E) Bail-Out with no changes

    Enter desired selection: d

    Baud Rates available are:
        (A) 50 (Not valid for Sync Modes)
        (B) 75 (Not valid for Sync Modes)
        (C) 110 (Not valid for Sync Modes)
        (D) 150 (Not valid for Sync Modes)
        (E) 300 (Not valid for Sync Modes)
        (F) 600 (Not valid for Sync Modes)
        (G) 1200
        (H) 2400
        (I) 4800
        (J) 9600
        (K) 14.4k
        (L) 19.2k
        (M) 38.4k
        (N) 48k (Not valid for Async Mode
        (O) 56k (Not valid for Async Mode)
        (P) 64k (Not valid for Async Mode)
        (Q) 72k (Not valid for Async Mode)
        (R) 128k (Not valid for Async Mode)
        (S) 256k (Not valid for Async Mode)


    40                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988


    Enter desired selection: o

    Note: TX Clock direction change also requires IOC jumpering correction.
    "TX Clock Line" and "Transmitter Clock" usually are from the same source.

    Possiblities for Transmit Clock Line:

        (A) Transmit Clock interface line is an input
        (B) Transmit Clock interface line is an output
    Enter desired selection: a


    Possible Sources for SCC Transmit (TX) Clock:

        (A) RTxC - Receive Clock line clocks SCC Transmitter
        (B) TRxC - Transmit Clock line clocks SCC Transmitter
        (C) BRG  - Baud Rate Generator clocks SCC Transmitter
        (D) DPLL - Digital Phase Locked Loop clocks SCC Transmitter

    Enter desired selection: b

    Possible Sources for SCC Receiver (RX) Clock:

        (A) RTxC - Receive Clock line clocks SCC Receiver
        (B) TRxC - Transmit Clock line clocks SCC Receiver
        (C) BRG  - Baud Rate Generator clocks SCC Receiver
        (D) DPLL - Digital Phase Locked Loop Clocks SCC Receiver

    Enter desired selection: b

    New Channel 0 BRG Time Constant (WR12/WR13): 002E, New WR11: 28

    ENGbug> ini
    ***********
         The reconfiguration is NOT COMPLETE until the ini[CR] command is
    issued from the terminal!    The new SCC template values to reprogram
    the Z8530 Write Registers are loaded into RAM and then  written  into
    the SCC when a program issues a Channel Command  Word to load   Write
    register 4 of the SCC. Typically this operation is performed when the
    software initialization routine is executed.   The "ini" command will
    halt the Engine code processing.     The user must now enter the "gd"
    command followed by the address to execute from    (ie ISIS = 70x and
    DIAGS = A00x).    This guarantees that the programs are restarted and
    the initialization  routines execute sending down a WR4 command pair.










    41                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988


                                   6.3  TTY I/O


         TTY  I/O is  functionally  the same  on  PICO as  the  Standard Tymnet
    Engine.  It is possible to type ahead in the local TTY mode but there still
    is no backspacing  or XON/XOFF support.  The  M68901 MFP device on  the IOC
    board has an internal USART utilized to implement the TTY I/O port and even
    though higher baud rates are functionally possible the TTY baud rate is set
    to 1200 baud as  per default and should  not be reconfigured to  any higher
    speed!  TTY  I/O processes generate  interrupts to the  EP via  the mailbox
    scheme and actually contend  with the other communication I/O  channels for
    the  available  processor  resources.   The  user  may  logon  to  ISIS DDT
    processes from the local port when in TTY mode.  Standalone diagnostics are
    also operated from the local TTY port.

         The TTY port is presented to the rear panel of PICO as a  male DB9-pin
    subminiature connector.  The appropriate  part number for the  9-pin female
    to 25-pin male cable is #160319-001.  Receive and transmit data signals are
    crossed  over  on   the  IOC  board  so   construction  of  the   cable  is
    straightforward  and  is  connected  directly  to  a  terminal  without any
    additional crossover cables required.






                                    6.4  IOCbug


         IOCbug is a conversion of the Motorola MACSbug 68000 uP  debugger.  As
    with  ENGbug,  backspace [CNTL]h,  XON/XOFF  [CNTL]s/[CNTL]q  functions are
    supported.   The IOCbug  presents  an IOC  view  of the  PICO  Engine.  For
    example, the Mailbox transactions  referenced in the ENGbug section  can be
    observed in  IOC RAM from  addresses 800370x through  8003C0x and  like the
    ENGbug processes,  the IOCbug  commands can bring  a running  machine down!
    The IOCbug "views" addresses 800000x  to 8FFFFEx as main EP  memory (000000
    to  FFFFFEx from  (ENGbug), 400000x  to 41FFFEx  as IOC  RAM and  000000 to
    01FFFEx as ROM area.















    42                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988


                         IOCbug COMMANDS

    IOCbug *> 

    PC .SR .US .SS .VB .SF .DF
    D0 .D1 .D2 .D3 .D4 .D5 .D6 .D7
    A0 .A1 .A2 .A3 .A4 .A5 .A6 .A7
    R0 .R1 .R2 .R3 .R4 .R5 .R6

    BF    <addr1> <addr2> <word>          Fill memory block.
    BI    <addr1> <addr2>                 Initialize block.
    BM    <addr1> <addr2> <addr3>         Move specified memory block.
    BR    [<addr> [;<count>]]             Set or display breakpoints.
    BS    <addr1> <addr2> "literal"       Search memory block.
    BT    <addr1> <addr2>                 Test block (destructive).
    DC                                    Data conversion.
    DF                                    Display registers.
    DR                                    Display registers.
    DT                                    Disable time measurments.
    DU    <addr1> <addr2> [<text>]        Dump memory.
    ET                                    Enable time measurments.
    G     [<addr1>]                       Execute after one trace.
    GD    [<addr1>]                       Execute without breakpoints.
    GO    [<addr1>]                       Execute (with breakpoints).
    GT    <breakpoint>                    Execute until breakpoint.
    HE                                    Displays this list.
    LO    [;<opts>] [=<text>]             Load S-record data.
    M     <addr1> [;<opts>]               Modify memory.
    MD    <addr1> [<count>]               Display memory.
    MM    <addr1> [;<opts>]               Modify memory.
    MS    <addr1> <data>                  Memory set.
    NOBR  <addr1>                         Remove breakpoint(s).
    OF                                    Display offsets (.R0-.R7).
    PF    <port number>                   Format or display port.
    PS                                    Display task status screen.
    PT                                    Display task statistcs.
    R                                     Modify register.
    RM                                    Modify register.
    RS                                    Reset host port.
    SS                                    Restart SCC channels.
    ST    <test #/*>                      Self test (destructive).
    T     [<count>]                       Trace.
    TM    [<exit character>]              Enter transparency mode.
    TR    [<count>]                       Trace.
    TT    <breakpoint>                    Temperary breakpoint trace.
    VE                                    Verify S-records.
    VI                                    Initialize vectors.
    VR                                    Display version number.
    ?                                     Displays this list.

        
    IOCbug  *> vr
    I/O Channel debugger version 1.00

    43                              PICO Engine                  SERVICE MANUAL
    CONSOLE PROCESSES                                              May 27, 1988




         The DC (Data  Conversion) command provides a  quick HEX to  DECIMAL or
    DECIMAL to HEX converter for the user.  The syntax for DECIMAL to HEX is dc
    #data[CR].  The # designates decimal data.  To convert HEX to DECIMAL enter
    dc $data[CR].  The $ designates  hexidecimal data.  It is from  this IOCbug
    that  the  user will  select  the Self-Tests,  initialize  memory  prior to
    loading  target code  and monitor  the active  processes under  the Monitor
    control.   The breakpoints  are  not for  Engine addresses  but  rather IOC
    addresses and are definitely NOT user friendly.  Once a breakpoint has been
    encounterred it  is usually  necessary to  reset PICO  and reload!   The PT
    (Process Time Display)  is enabled with  the ET (Enable  Time Measurements)
    command and disabled  with the DT  (Disable Time Measurement)  command.  If
    required this  command should  only be  temporarily enabled,  displayed and
    promptly disabled  as the  trace consumes crucial  processor time.   The PS
    (Print Status) command is usually just as effective and displays the status
    of all  16 Task  Control Blocks  (the 16th consist  of the  8 transmit  + 8
    receive  devices for  I/O  channels).  Each  task (routine)  is  flagged as
    Active,  Dismissed,  Invalid,  Suspended, Resumed  or  New.   The Dismissed
    counts (number of times the process dismissed back to the Monitor)  and the
    TMO (time  out and suspended  because the process  used up its  entire time
    slice) are useful to determine problems in servicing routines.

         When  System  level errors  (which  bring down  the  Engine)  occur, a
    concise error message will be output to the terminal along with the current
    PC,  PSD  and  general  register  contents.   Without  a  Motorola  MC68000
    Programmers Reference  Manual the  error messages  will most  likely appear
    somewhat cryptic but when  encounterred they should be noted  and forwarded
    with any other crash information available from the ISIS, SLOT or NODE CODE
    crash fields.
























    44                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988






                           7 -  MAINTENANCE INFORMATION







                               7.1  DIAGNOSTIC TOOLS


         At System Power  Up time the PICO  IOC Firmware will intiate  a System
    Reset strobe  from the M68010  which results in  the initialization  of the
    DMAC, MFP and IOC SCC I/O devices.  Default SCC template values  are loaded
    from the ROM into the SCC Control Structure.  The Real Time Clock  is fired
    up and the Watch Dog Timer is enabled.  As there is no code  being executed
    at this moment the timer will  of course expire and a non-maskable  Level 7
    interrupt will  be issued to  the M68010.  The  subsequent Level  7 service
    routine will set a bit in IOC RAM and vector to the Power On initialization
    routine entry point and execute the BOOT routine.  The BOOT code is written
    into Engine RAM  at 700x to  10E2x and EF000x  to EFFFEx and  executed from
    RAM.  BOOT code then issues resets  to the Watch Dog Timer to  prevent it's
    expiration, reconfigures the  SCC templates for channels  0 to 3  and scans
    for down-line-load  headers on  channels 0 to  3.  Successful  execution of
    this sequence at  Power Up time implies  a large percentage of  hardware is
    functional.  Failure  to execute the  Power On sequence  will result  in an
    error event and the current  PSW, Register contents and the address  of the
    last successfully executed instruction fetched, along with the  contents of
    the address will be displayed  at the ENGbug prompt.  Physical  evidence of
    success or failure may  be the state of the  GREEN (PASS) LED 1 or  the RED
    (FAIL)  LED 2  located on  the  IOC PCB  edge adjacent  to the  I/O  port 2
    connector.  If the system fails to turn on the RED LED at power on and then
    extinguish it, the Power Up sequence has failed

         The  PICO Firmware  has 10  Self-Tests which  can be  invoked  via the
    IOCbug  function.   Execution  of the  Self-Tests  can  be  accomplished by
    disabling the Watch  Dog Timer and changing  from the ENGbug prompt  to the
    IOCbug prompt.  The Watch Dog  Timer is disabled by enterring a  lower case
    wd off[CR].  The IOCbug prompt  is acquired by enterring [CNTL]N  two times
    sequentially.  The proper syntax for invoking the Self-Test(s) is ST X[CR],
    where  X  is  an integer  from  0  to  9.  Self-Tests  0  to  8  execute in
    approximately  10 seconds  or  less.  Self-Test  9 requires  25  minutes to
    completion.  At the  completion of each test  the user will be  returned to
    the ENGbug prompt.  A failure  to complete should return the  PSW, Register
    contents  and the  address of  the last  successfully  executed instruction
    fetched.




    45                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988



    SELF TEST CODE             TEST FUNCTION

          0                    Executes ST 1 through 8                     
          1                    IOC Static RAM test
          2                    Z8530 SCC test
          3                    M68450 DMAC test
          4                    M68901 MFP test
          5                    Engine Front Panel Interface test
          6                    Engine Instruction test
          7                    Engine MAC test
          8                    Engine Interrupt test
          9                    Extended Engine RAM test







                            7.2  SELF TESTS DESCRIPTORS


    ST 1:  A  non-destructive IOC Static RAM  test.  Each RAM location  is read
    and written  with the  complement of the  read data.   The address  is read
    again and verfied.  If  correct, the data is complemented  again, rewritten
    and verified.

    ST 2:  A Z8530 SCC series of three subtests.  Data is written into  the SCC
    control Registers 12 and 13 to verify that the data and control signals are
    functional.   The  SCCs  are  put  into  internal  loopback  mode,  data is
    transmitted  in the  ASYNC  mode at  4800  baud, received  and  verified as
    received.  The actual I/O line drivers are not tested by this test.  Verify
    that  the  SCCs  generate interrupts  correctly  for  transmit  and receive
    characters.

    ST 3:   An M68450 DMAC  series of  four subtests.  Data  is written  to all
    accessable internal DMAC registers and read back for verifcation.  The DMAC
    is initialized for DMA memory  to memory transfers and data  is transferred
    to IOC RAM  address space to verify  that data, address and  control logics
    are functional  in DMA bus  transactions.  Data transfer  completion should
    cause a DMAC normal completion interrupt.  Transferred data and DMAC status
    are verified  correct.  Transfer  a byte count  of zero  bytes of  data and
    verify  a  DMAC error  interrupt  is properly  executed.   Program  the SCC
    channels 0 and 1 for  internal loopback and enable DMAC transfers  from RAM
    to SCC and back from SCC to RAM.  Verify that SCC transmit buffer empty and
    receive buffer full status  conditions generate DMA requests and  that data
    is transferred correctly.

    ST  4:   A  Multi-Function  Peripheral  functional  test.   M68901 internal
    registers are written  into and read back  for verification.  The  four MFP
    timers  are setup  and  tested to  be  functional and  MFP  generated timer


    46                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988


    interrupts are verified.  The USART  used for the local Console and  TTY is
    set to internal loopback and data is transferred in the ASYNC mode  at 4800
    baud to verify transmit and receive functions.  USART transmit  and receive
    interrupts are tested.

    ST  5:  A  very basic  test to  verify that  the code  for the  Front Panel
    Interface is functional.  This interface is used by the IOC to  control and
    monitor NEP board functions.

    ST 6:   A series of  subtests verify Engine  instruction fetch,  decode and
    execution logic.  ALU functions and memory read/writes are verified.

    ST 7:  A test of MAC error detection and interrupt handling functions.  MAC
    access  violations  are generated  and  the resultant  interrupt  status is
    verified.  MAC Execute Protect  and Write Protect violation  interrupts are
    verified.  MAC Segment Present and Segment Length violation  interrupts are
    verified.  MAC  Write Interrupt violation  is verified.  The  Engine memory
    Bus Lock function is tested.

    ST 8:  ATN0, ATN1 and ATN2 interrupts are generated and verified.

    ST 9:   A 25 minute  test of the  1024K bytes of  main Engine  memory.  The
    existing Engine Memory Diagnostic which is down-line-loaded on other Tymnet
    products would require non-trivial modifications to execute properly on the
    PICO Engine.  Most  of the existing  Engine Diagnostic tests  would require
    addressing  relocation to  avoid accesses  to PICO  special  mailbox memory
    areas.  The  Low memory test,  memory relocation routine,  functional block
    test,   battery backup  test and  memory chip  specifics in  error messages
    would all require changes so the Self-Test is designed to  be comprehensive
    and exceeds the minimal basic confidence level of the other Self-Tests.

         Engine memory  addresses 8F0000x through  8F003Fx are not  modified by
    the ST commands.  This  area of Engine RAM   is reserved for the  Channel 0
    command driver which the ISIS utilizes for SCC template manipulation.






                    7.3  STANDALONE DOWN-LINE-LOAD DIAGNOSTICS


    DCPU:  Version  4 of the  CPU diagnostic, which  is the current  version at
    this  date,  is executable  on  the  PICO Engine.   The  CPU  diagnostic is
    designed  to be  a comprehensive  test of  the instruction  set, registers,
    arithmetic and logic  operations, addressing modes and  illegal instruction
    interrupts  which makes  it the  logical choice  to load  immediately after
    execution of  the Self-Test  at System  Bring-up, regular  PM (preventative
    maintenance) and  whenever troubleshooting  the PICO  Engine!  As  the PICO
    Engine utilizes a "virtual" console  a 1200 baud capable terminal  (CRT) or
    terminal emulator  is required.  Execution  of the diagnostic  presumes the


    47                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988


    PICO is healthy enough to accept a synchronous down-line-load from either a
    Tymnet Sync or Tymnet SIO line.  When loaded the Front Console will display
    300000000> which will alternate  with the error display 000000000>.   If an
    F1  is  displayed  at  this  time  it  is  an  indication  that  a hardware
    malfunction  prevented  the  diagnostic  from  detecting  the  type  of MAC
    installed, amount of memory  available, presence of SIO Mboard  address 80x
    or the type of system it loaded onto.  From the terminal  enterring [CNTL]N
    one time is analogous to logging onto the TTY port of the Standard Engine.

    The user will be greeted by the banner display:

    ENGINE CPU DIAGNOSTIC - VERSION 4.0 (04-30-87)

    SYSTEM FOUND = TSI CONTROLLER

    TSI MAC FOUND

    SIO BOARD X"80" FOUND

    MEMORY FOUND
    000000 - 0FFFFF

    * (Ready to accept commands!!!  Enter RUN[CR])

         One complete  pass through  the diagnostic with  the terminal  at 1200
    baud will require exactly 50 seconds.   The default LOOP value is set  to 5
    iterations of  the diagnostic which  will require 4  minutes 10  seconds if
    error free.  The CPU diagnostic is  comprised of 15 tests all of  which are
    executable  on  PICO  and  all  are  executed  by  default.   There  are no
    subsequent  nondefault tests  to execute  after main  program  execution is
    complete.  Any errors  incurred will be displayed  to the terminal  and the
    program will continue  to completion unless the  user specifies to  halt on
    error condition.  The  diagnostic can be restarted  at any time in  the TTY
    mode by  enterring GO A00[CR]  or in the  ENGbug mode by  enterring INI[CR]
    followed by GD A00[CR].  Refer  to the specific DCPU.DOC file found  in the
    (ENGDIAG) directory in the  Public Network Systems for more  CPU diagnostic
    specifics.

    DMAC:  Version 7.0 of the  MAC diagnostic, which is the current  version at
    this date, is executable on the PICO Engine.  The MAC diagnostic  is useful
    to test the MAC gate array on the NEP board.  The diagnostic will  test all
    Segmentation registers, the Segmentation register select and relocation and
    protection.  This diagnostic will not test the DMA circuitry of the system!
    It is useful to  help in fault isolation   and debug of suspect  MAC errors
    and it is also appropriate to execute this test at System Bring-up, regular
    PM and of course, whenever  troubleshooting the PICO Engine.  DMAC  will be
    loaded just as the DCPU diagnostic is and at the end of the down-line-load,
    the Front Console will  display 200000000> which again will  alternate with
    the  error  display 000000000>.   As  in DCPU,  if  an F1  system  error is
    displayed at  this time  it is  an indication  that a  hardware malfunction
    prevented the program from detecting the type of MAC found or  the presence
    of SIO Mboard device address 80.  Except for the MAC circuitry  under test,


    48                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988


    the hardware must  be known to  pass the Self-Tests and  DCPU to be  of any
    value!  Again, from the terminal,  enter [CNTL]N one time to enter  the TTY
    mode of operation.

    The user will be greeted by the banner display:

    TTY TSI MAC FOUND

    SIO BOARD X"80" FOUND

    MEMORY FOUND
    000000-0FFFFF

    BLOCK NUMBER     MEMORY ADDRESS     MEMORY TYPE
     00 - 0F         000000-0FFFFE      TSI DRAM

    * (Ready to accept commands!!!  Enter RUN[CR])

         One complete  pass through  the diagnostic with  the terminal  at 1200
    baud will require 2 minutes 20 seconds.  The default LOOP value is set to 1
    iteration.   Tests  2 (Segmentation  Register  Set), 3  (Relocation)  and 4
    (Protection) are selected for execution by default.  Test 5  (Multi-Meg) is
    not appropriate for use on PICO Engines and test 6 (Relocation  Scope Loop)
    will not  run on PICO  so again  there are no  nondefault tests  to execute
    after main program execution  is complete.  If any errors  are encounterred
    the  test will  continue and  display the  error count  at the  end  of the
    test(s).  The diagnostic can  be restarted at any  time in the TTY  mode by
    enterring GO A00[CR] or in the ENGbug mode by enterring INI[CR] followed by
    GD A00[CR].   Refer to DMAC.DOC  in the (ENGDIAG)  directory of  the Tymnet
    Public Network Systems for additional MAC diagnostic specifics.

    DSIO:  Version  3.0 of the  I/O diagnosticc ,  which aagain is  the current
    version at this date, is executable on the PICO Engine.  DSIO is  useful to
    exercise  the  Serial  I/O  subsystem of  PICO  Engine.   The  subsystem is
    comprised of a DMA interface  for channels 0 and 1, interface  circuitry to
    SCC  channels 2  through 7  which handshake  with the  NEP  CPU, scratchpad
    static RAMs which buffer control information and dat, the actual serial I/O
    buses  which propagate  transmitted  and received  data and  the  I/O level
    shifters  and transceivers.   The diagnostic  will test  all 8  channels in
    HDLC, ASYNC and ESYNC modes.  I/O timing should be set to 9600 baud for the
    most  reliable  results.   Channels  2  through  7  should   be  physically
    configured to output an  internally sourced transmit clock  and  to receive
    an external receive clock.  When properly configured a  standard 630030-001
    Rev A loopback  plug may be utilized  to loopback data, clocks  and control
    signals.  The  loopback plug  will short  DTR out  back to  DSR in  the I/O
    channels should  be strapped to  ignore DCD and  recognize DSR to  pass the
    control  signal  tests.   RTS   and  CTS  signals  require   no  strapping.
    Synchronous modems configured  for Local Analog  Loopback may also  be used
    with the diagnostic as long as the hardware and software straps reflect the
    externally sourced I/O  timing signals.  When  loaded the Front  Panel will
    display 400000000> alternating  with 000000000> the error  display.  Should
    the diagnostic fail to detect the type of MAC found or the presence  of SIO


    49                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988


    Mboard device  address 80 an  error code  of F1 will  be displayed  and the
    diagnostic halts.  To  enter the TTY mode  to execute the program  from the
    terminal enter [CNTL]N one time.

    The user will be greeted with the banner display:

    SIO DIAGNOSTIC - VERSION 3.0 (Nov-30-1987)

    SYSTEM TYPE FOUND = TSI CONTROLLER OR NANO ENGINE

    TSI MAC OR NANO ENGINE MAC FOUND

    SIO BOARD X'80' FOUND

    MEMORY FOUND
    000000-0FFFFF

    *(Ready to accept commands!!!  Enter SELT[CR])










         The diagnostic should respond  to the SELT command by  displaying that
    channels  0  through 7  exist  and prompt  the  user to  enter  the channel
    number(s)  to exercise.   Should an  error be  encounterred  during program
    execution, an error message will be displayed, an error counter updated and
    the program  will continue  until completion unless  the user  specifies to
    halt  on error  conditions.  DSIO  consist  of 9  tests, all  of  which are
    executed by default  on the PICO Engine,  so again there are  no subsequent
    non-default tests to select after main program execution.  The  program may
    be resarted at any time in the TTY mode by enterring GO A00[CR] or from the
    ENGbug prompt by enterring [INI]  followed by GD A00[CR].  Please  refer to
    the  latest DSIO.DOC  file available  in (BETADIAG)  directories  of Tymnet
    Public Network Systems for addtional operating instructions,  loopback plug
    requirements and available options  as this is a recently  enhanced version
    of DSIO!












    50                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988


                        7.4  RS-232 SIGNAL LOOPBACK METHODS


         RS-232 Signal loopback  is accomplished via  either a breakout  box or
    the standard Tymnet loopback plugs.

    For loopback via the standard plugs the following plug are necessary:


         SYNC Loopback Plugs:
             Test plug #630030-001 (25-pin)  ==>  RS-232C/V.24 SIGNALS
             Test plug #630030-002 (25-pin)  ==>  V.35   CCITT SIGNALS
             Test plug #630034-001 (15-pin)  ==>  RS-232C/V.24 SIGNALS
             (The 630034-001 plug may be used directly with the IOC J2
             and J3 15-pin connectors and either 630030 or 630034 Plug
             satisfies any ASYNC loopback test requirements.)

    For loopback via a breakout box, the following pin jumpering is necessary:

         SYNC/ASYNC EIA Signals:
             Jumper pin  2 (TD)   ==>  pin  3 (RD)
             Jumper pin  4 (RTS)  ==>  pin  5 (CTS)
             Jumper pin 20 (DTR)  ==>  pin  6 (DSR)
             Jumper pin 15 (TXC)  ==>  pin 17 (RXC)

         SYNC CCITT V.35 Signals:
             Jumper pin  4 (RTS)  ==>  pin  5 (DCD)
             Jumper pin 20 (DTR)  ==>  pin  6 (DSR)
             Jumper pin  9 (TCP)  ==>  pin 23 (RCP)
             Jumper pin 10 (TCS)  ==>  pin 24 (TCS)
             Jumper pin 11 (TDP)  ==>  pin 21 (RDP)
             Jumper pin 12 (TDS)  ==>  pin 22 (RDS)







                            7.5  COMPONENT PART NUMBERS


    Listed below are the component  part numbers for all equipment  utilized by
    the PICO Engine:










    51                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988



    BASIC COMPONENTS:

            PICO Engine                     650070-001

            Mechanical Assembly             640181-001
            Weldment Enclosure              170699-001
            Silkscreen                      800072-001
            Cabinet                         170698-001
            Silkscreen                      800071-001
            Power Supply                    390037-001
            Isolation Pad                   170751-001
            Power Line Filter               290044-001
            Muffin Fan                      580079-001
            Front Cover Plate               170730-001
            Switch Cable Assembly           160139-001
            AC Power Dist. Cable            160330-001
            Line Power Cord                 220058-001
            DC Power Dist Cable             160329-001
            Backplane ABC                   470294-001
            LED Assembly                    470297-001

            IOC Subassembly                 640187-001
            SCC Card ABC                    470296-001
            IOC Board ABC                   470298-001
            Jumper Cables                   160342-001

            EP Board ABC                    470285-001

            SCC Ports Cable Assembly        640184-001
            SCC Port Cable                  160325-001

            25 to 25 Cable                  160327-001
            15 to 25 Cable                  160324-001
            9 to 9 Cable                    160326-001
            Inter-Board Cables              160343-001

    OPTIONAL EQUIPMENT:
            Battery Backup Option           640xxx-tab
            V.35 25 to MR-34 Cable          160053-tab














    52                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988


                       7.6  ISIS ENVIRONMENT TROUBLESHOOTING


         ISIS-II provides  PICO with  the same  common crash  table as  for all
    other Tymnet Engines.  The crash  table is organized into three  (3) parts.
    The crash table header, summary table of the last 10x crashes and 20x bytes
    of detailed crash data for the first and last crash of the  ISIS (exclusive
    of  power fail  and  manual restart).   Absolute address  6Cx  contains the
    pointer to the crash table  header.  This is nothing new  or extraordianry.
    What is slightly new is that the machine can be crashed hard and halted and
    crash data  recovery accomplished  via the ENGbug  process.  This  could be
    performed on  the Engine  Console, but never  so conveniently!    As ENGbug
    "views" Engine memory, simply execute a memory dump of "md 6C[CR]"  and 10x
    bytes of data will  be displayed.  The pointer  to the crash table  will be
    first.  Typically for version 9.0 ISIS the crash table header is  at 1554x.
    A memory dump of  1554x for 130x bytes  will display all three  crash table
    fields.

         The crash detail table will display the crash count, ID, crash PSD and
    Fast C crash time  followed by Reg Set 0,  Reg Set F (or current  set), the
    MAC Registers and the last slot executed.  No new crash IDs are defined for
    PICO therefore all crash codes can be referenced in the ISIS-II manual.

         Should the Node Code crash  the Front Panel will display  the familiar
    DEAD.  As ISIS is still running  when the Node Code crashes, as  is obvious
    from the Front Panel Display, the user may simply logon to DDT from the TTY
    I/O prompt  and examine the  Node Code crash.   XRAY will usually  still be
    running  as a  background task  so the  user may  select slot  0  at logon,
    execute the "? STAT[CR]" and then at the XRAY prompt enter "DCD" to display
    Node Code crash data.  Crash IDs for the Node Code are to found in the XRAY
    manual.

         Any slot crash may  be examined via the  TTY I/O process in  ISIS DDT.
    Slots  will  either  be  crashed and  restarted  or  crashed  hard  and not
    restarted.  Either way crash  data retrieval is identical.   Logon directly
    to the slot in  question and enter "R  E0050 4[CR]" which will  display the
    slot execution start address.   Next read the slot execution  start address
    for 8 bytes.  The last 2 bytes  of data minus 2 will be the address  of the
    actual crash table.  Subtract 2  from the address displayed and  proceed to
    read 4Cx bytes from the calculated address to display the slot crash table.
    The slot  crash table consists  of the crash  count, ID, address  where the
    crash occurred,  address where the  crash was "called"  from and  the crash
    register  save  area.   Crash  IDs  are  unique  to  every  particular slot
    requiring either a listing of the slot code in question for reference  or a
    simple  synopsis  of  crash codes  for  the  particular  application.  When
    examining slot crashes it is often useful to perform an "SD" display of any
    channels associated with the slot to examine the state of the SCC registers
    and  address  pointers.   This  inner  and  outter  method   can  sometimes
    "sandwich" the cause of a slot crash when not readily obvious from the slot
    data alone.

         For remote analysis PICO machine  code or slot code may be  dumped via


    53                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988


    the network.  To  dump a complete machine  PICO must be back  executing the
    bootstrap.   In Betatest  sites this  will typically  require a  local user
    enter the "boot[CR]" command from the console.  When "released" the WDT may
    be left enabled for DLOADs.  Once in boot the LOAD II "D" option  will dump
    the  entire node  over  the network  neighbor line.   Usually  dumping from
    address $0  to $1FFFEx will  recover the ISIS  and Node Code  crash fields.
    The LOAD II "U" option will dump slots for any running PICO.  After dumping
    a slot retrieve the  symbols for the slot from  NAD and append them  to the
    dump!






                                  7.7  SCC STATUS


         PICO  I/O baud  rates can  be determined  remotely using  NAD  and DDT
    processes.  ISIS will assign a  default value to every channel  declared in
    the machine configuration  Tymfile unless override parameters  are declared
    in the "NAN.M" macro fields.  The default SCC templates are defined  in the
    ISIS  MBOARD module  of the  source code  at the  label SCCTAB.   The user-
    defined values  are assembled into  an SCC User  Macro Vector Table  in the
    ISIS MBOARD  module at the  label SUMV00.  After  assembly of the  ISIS NIB
    file run NAD again to determine the exact addresses of the SCC tables.  The
    MBOARD module must be localized to define the lables.  While in  the MBOARD
    module it is  relatively easy to determine  the absolute addresses  for SIO
    status  fields  for every  logical  unit declared  in  the  machine Tymfile
    regardless of any slot they are subsequently assigned to.   After obtaining
    the  pointers and  addresses  the user  may  then either  construct  an AUX
    circuit to  the ISIS kernel  of the PICO  under evaluation or  simply build
    another DDT circuit to  the ISIS kernel directly.  Most  software Engineers
    and CCs will probably  choose to use NAD  to "front end" DDT  processes for
    them whereas the Field Engineers  will probably take the more  direct tack,
    exit NAD and build a direct  DDT circuit to the ISIS kernel.   Consider the
    example:

















    54                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988


    -O ALL
    TKOCHMANN

    -
    Did not set WC RC OP GD TD ST JL XC
    -R NAD
    1.5
    %F   NT2774.NIB <= ISIS NIB FILE

    %G
    ;G

    Data ranges read:
    0-1561 1846-9843 9844-11841 11842-118C7 0F0000-0F019B 


    LO MBOARD <==  PULL IN MBOARD MODULE


    M.STAT#   3  <==  OFFSET FOR SIO STATUS ADDRESS
    M.P00#   304B   <==  STATUS ADDRESS, CHANNEL 0
    M.P01#   3059   <==  "                     " 1
    M.P02#   3067   <==  "                     " 2
    M.P03#   3075   <==  "                     " 3
    M.P04#   3083   <==  "                     " 4
    M.P05#   3091   <==  "                     " 5
    M.P06#   309F   <==  "                     " 6
    M.P07#   30AD   <==  "                     " 7

    SCCTAB#   3388   <== SCC TABLE START ADDRESS

    SUMV00#   3308   <== SCC USER MACRO VALUE START ADDRESS


    ;C   NTS:267
    Working
    Circuit ready


    inter-link established from Bubbnet-Campus to Ntsnet-Htslab
    please log in: %RTKOCHMANN:1028;AUX DDT


    node: 2774
    host: 1028


    slot #: 
    ;R01
    Slot 01 down: not loaded
    *
    ^FF


    55                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988



    Slot FF         VERIFY THAT USER DEFINED VALUES  HAVE
    *R 3388 80  <== BEEN WRITTEN OVER THE DEFAULTS HERE!!
    03388  0951  0000  0915  0000  0909  0000  0E09  0000
    03398  0951  0000  0915  0000  0909  0000  0909  0000
    033A8  0951  0000  0815  0000  0915  0000  0909  0000
    033B8  0851  0000  0915  0000  0915  0000  0909  0000
    033C8  0851  0000  0915  0000  0915  0000  0909  0000
    033D8  0951  0000  0915  0000  0915  0000  0909  0000
    033E8  0951  0000  0715  0000  0915  0000  0909  0000
    033F8  0951  0000  0915  0000  0715  0000  0909  0000
           [  ASYNC ]  [  ESYNC ]  [  HDLC  ]  [  DMA   ]
                                               
                                               [WR12/13,WR11]
    DATA OF INTEREST:  CHANNEL 0 DMA  TEMPLATE = 0E09, 56 K
                       CHANNEL 1 DMA  TEMPLATE = 0909, 9.6K
                       CHANNEL 2 ESYN TEMPLATE = 0815, 4.8K
                       CHANNEL 3 ASYN TEMPLATE = 0851, 4.8K
                       CHANNEL 4 ASYN TEMPLATE = 0851, 4.8K
                       CHANNEL 5 ALL TEMPLATES =  DEFAULTS!
                       CHANNEL 6 ESYN TEMPLATE = 0715, 2.4K
                       CHANNEL 7 HDLC TEMPLATE = 0715, 2.4K

    SCC WR11=09, 15 AND 51 FOR THE VARIOUS MODES.
    SCC WR12/13=07(2400 BAUD) THROUGH 0E(56K BAUD).

                   USER DEFINED VALUES TO BE WRITTEN
    *R 3308 80  <==  OVER SCC TABLE DEFAULT VALUES
    03308  0000  0000  0000  0000  0000  0000  8E09  0000
    03318  0000  0000  0000  0000  0000  0000  8909  0000
    03328  0000  0000  8815  0000  0000  0000  0000  0000
    03338  8851  0000  0000  0000  0000  0000  0000  0000
    03348  8851  0000  0000  0000  0000  0000  0000  0000
    03358  0000  0000  0000  0000  8915  0000  0000  0000
    03368  0000  0000  8715  0000  0000  0000  0000  0000
    03378  0000  0000  0000  0000  8715  0000  0000  0000
           [  ASYNC ]  [  ESYNC ]  [  HDLC  ]  [  DMA   ]

















    56                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988


        The SIO STATUS FIELDS can also be as easily observed from the
    ISIS kernel.  Simply take the status address for the channel that
    is desired (ie M.P00 = Channel 0, M.P01 = Channel 1,...M.P07 =7).
    and add the offset value (3) to derive the address of the pointer
    to the associated status field.  Then read the address  acquired
    as in the example:

    *R 304B 4 <==POINTER TO SIO STATUS FIELD
    0304B  0002  0BF0 <==ACTUAL ABSOLUTE PHYSICAL ADDRESS OF STATUS
    *R 20BF0 10
    20BF0  6C07  0000  000D  0000  0600  0000  36D5  0000
    (RR0=6C,RR1=07,IDLE CNT=0,CRC CNT=0,ABORT CNT=0,
    FLAGS=D,STATUS=6 RX OVERRUN AT FAST C TIME 36D5)
    *R 305C 4 <==POINTER TO SIO STATUS FIELD
    0305C  0008  1DD0 <== ABSOLUTE STATUS ADDRESS
    *R 81DD0 10
    81DD0  1007  0000  000D  0000  0000  0000  0000  0000
    *R 306A 4 <==POINTER
    0306A  0000  0000 <=ESYNC HAS NO SIO STATUS AREA!!!
    *R 3078 4 <==POINTER
    03078  0005  9DD0 <==ADDRESS
    *R 59DD0 10
    59DD0  5407  0000  000D  0000  0000  0000  0000  0000
    *R 3086 4 <=POINTER
    03086  0006  DDD0 <=ADDRESS
    *R 6DDD0 10
    6DDD0  5407  0000  000D  0000  0000  0000  0000  0000
    *R 3094 4 <=POINTER
    03094  0008  1DD0 <=ADDRESS
    *R 81DD0 10
    81DD0  6C07  0000  000D  0000  0000  0000  0000  0000
    *R 30A2 4 <=POINTER
    030A2  0000  0000 <=ANOTHER ESYNC CHANNEL!!!
    *R 30B0 4 <=POINTER
    030B0  0002  0C00 <=ADDRESS
    *R 20C00 10
    20C00  6C07  0000  000D  0000  0000  0000  0000  0000

         Observe that the user may change to slot 0 (NODE CODE)
    and execute an SIO STATUS (SS) XRAY command to display the
    same SIO STATUS fields for the SIO channels designated for
    the NODE CODE.  The XRAY snap does not provide as complete
    of an indication of the actual status.  The SIO Error Code
    6 displayed in the kernel snap is not displayed here.  1D
    events would be generated in the XRAY crypto logger instead.
    Here channels 0 and 7 are Node Code logical Units:

    *^0
    Slot 00 running: DDT
    *?STAT
    **X-RAY** NODE: 02774  HOST: 01028  TIME: 145:22:47:02
    >SS
    LN        REG0            REG1      IDL CRC HDLC  A R I T

    57                              PICO Engine                  SERVICE MANUAL
    MAINTENANCE INFORMATION                                        May 27, 1988


    NO  0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 LIN ERR ABRT  1 C L C
    01  0 1 1 0 1 1 0 0 0 0 0 0 0 1 1 1 00  00  0000  1 1 0 1 
    02  0 1 1 0 1 1 0 0 0 0 0 0 0 1 1 1 00  00  0000  1 1 0 1 
    >
    *Z Logging off? Z%Q
    inter-link cleared from BubbB
    net-Campus to Ntsnet-Htslab

    Aux circuit lost
    %Q
    EXIT

         Patching  or modifying  the SCC  clock speeds  is simply  performed by
    selecting the field to  be modified in the  SCC USER MACRO VALUE  TABLE and
    writing over  the data  assembled in.   Do not  attempt to  change protocol
    modes.   Be certain  to determine  and modify  the specific  field  for the
    specific channel of interest.  After modifying the SUMV00 field  perform an
    initialization of the machine at which time the new values will  be written
    onto  the  SCC  TABLE.   This  can be  quite  useful  for  lines  that have
    mismatched I/O clocks.   It can also  be used to  reduce the baud  rates of
    channels experiencing receive overrun and/or transmit  underrun conditions.
    In  the field  a most  practical application  could be  to patch  a channel
    configured for external clocking to output clocks at a given  frequency for
    loopback line  testing at  the port level.   For example  channel 0  of the
    example above  expects 56K clocks  (0E) to be  externally provided  (09) as
    decoded from address 3394x with the data 0E09x in the DMA field.  To modify
    this for loopback with on-board clocks locate the associated DMA  field for
    channel 0 in the SUMV00 TABLE located here at 3314x and perform a write for
    2 bytes of 8915x and then initialize PICO with a "g 70[CR]"  (remember this
    is all in the kernel).  When  you log back onto the kernel and  display the
    SCC TABLE the  new values 0915x  will be displayed  at 3394x and  channel 0
    hardware can now be strapped  to provide the 9600 baud transmit  clock just
    programmed  in.   To relate  this  to  the SCC,  WR11  (clock  control mode
    register) has been modified to  15x and WR12/WR13 (buad rate  time constant
    generator  registers)  modified  to  0009x.   Please  refer  to  the  Zilog
    Z8030/Z8530 Technical Manual for specific bit interpretations.  Remember to
    restore  the original  values and  reinitialize when  testing  is completed
    either  via NAD-DDT  or directly  via the  DDT.  Again,  modify  the SUMV00
    field, not the SCC TABLE.  If successful the user will be able to  read the
    new parameters in the SCC TABLE  after the ISIS moves them in  from SUMV00.
    Hex values 0 through F correspond to baud rates 50 through 64K as should be
    obvious from the example above.












    58                              PICO Engine                  SERVICE MANUAL
    ISIS REFERENCES                                                May 27, 1988






                               8 -  ISIS REFERENCES







                                 8.1  ISIS MACROS


         Versions 9.0  and up  of ISIS-II  support PICO  Engine configurations.
    ISIS now provides a mechanism  to override the default Firmware  SCC values
    and any  user defined ENGbug  SCC values enabling  the ISIS to  define port
    "type", "speed" and "clock sources".

         Tymfile parameter MACHIN  EQ 4 defines  the PICO environment  of eight
    ports.  Note that the Node Code only recognizes MACHIN EQ 3 defined for the
    4 port TSI  environment.  ISIS macro NAN.M  has seven parameters  to define
    each PICO port configuration.  Note again that the Node Code  knows nothing
    of the macro.  There  will be two Tymfiles  for each PICO, an  ISIS machine
    Tymfile and a Node Code Tymfile.  Typically to avoid Tymfile  mismatches or
    inconsistancies, the ISIS ".TYM" Tymfile is created first then written to a
    ".T00" Node Code Tymfile  for slot 0 where the  MACHIN EQ 3 equate  will be
    changed from  the 4.  All  NAN.M statements will  next be deleted  from the
    Node Code Tymfile as they are not declared or defined for Node  Code source
    code.  No other differences will  be expected or should be made!   The ISIS
    ".CMD" command file driver will call  up the ".TYM" file and the  Node Code
    ".C00" command file driver will call up the ".T00" file.

         ISIS  defined SCC  values are  modified at  ISIS  initialization time.
    ISIS-II defines  the Logical Units  available and the  Node Code  and slots
    will still decide the configuration as they now do for the Engine.  ISIS-II
    communicates with PICO IOC through a block mode I/O protocol which uses the
    message block and I/O  control blocks in the  upper 64K Bytes of  EP memory
    (8F0000-8F201Fx).  The I/O Control Block 0 (8F2020-8F003Ex) encodes service
    requests  and transactions  for channel  0 communication.   A configuration
    block of 8 bytes each for  the 8 ports (64 bytes total) containing  the SCC
    values  are moved  into  the SCC  window buffer  (8F2020-8FFFFEx).   An SCC
    configuration command (30x) configures all eight SCC channels.  The channel
    processor transfers all configuration  parameters from the ISIS in  one WDR
    (write  data) service  request.   The channel  0 command  is  executed upon
    receipt of the start I/O  (STRTIO) interrupt from the ISIS.  ISIS  writes a
    01 to the start I/O byte location (8F0021x).

         The channel processor will send the WDR service request, configure the
    SCC Write  registers, update  the status  byte and  send SSR  (read status)
    service  request.  There  is  no error  check regarding  the  completion of


    59                              PICO Engine                  SERVICE MANUAL
    ISIS REFERENCES                                                May 27, 1988


    requested write register  operations!  Operations are  presumed successful.
    The "SD" configuration display  from ENGbug reflects only what  is expected
    to be in the SCC Write registers.

         The  SIO status  bits presented  to the  Engine via  the T609  Z80 SIO
    support chip are not implemented on PICO.  The status field for  clocks and
    idle lines will always read "0Dx".  Do not rely on it to verify that clocks
    are physically presented to  I/O ports!  The best software  indication that
    clocks are present is the changing pointers for transmit and receive CCWs.

         Only channels 0 and 1  may be configured as DMA. The  seven parameters
    for the eight ports are intialized to ISIS default values  unless otherwise
    specified by the "NAN.M" macro.  "NAN.M" has the form:


    NAN.M = TYMFILE MACRO TO OVERRIDE DEFAULT SCC VALUES  (VALUE FIELD = 7)
    NAN.M(VALUE 0 = CHANNEL #, 1 = CHANNEL TYPE, 2 = BAUD RATE, 3 = RECEIVE
         CLOCK SOURCE, 4 = TRANSMIT CLOCK SOURCE, 5 = TRANSMIT  CLOCK  LINE
         INT/EXT, 6 = TRANSMIT CLOCK LINE SOURCE)

                       CHANNEL 0 - 1 DEFAULTS

    TYPE | BAUD | RXC SOURCE | TXC SOURCE | TXC CLOCK LINE | TXC LINE SOURCE
    ------------------------------------------------------------------------
     ASY | 9600 |    TXC     |    BRG     |       OUT      |      TXC
    ------------------------------------------------------------------------
     ESY | 9600 |    XTL     |    BRG     |       OUT      |      TXC
    ------------------------------------------------------------------------
     HDL | 9600 |    XTL     |    TXC     |       IN       |      TXC
    ------------------------------------------------------------------------
     DMA | 9600 |    XTL     |    TXC     |       IN       |      TXC
    ------------------------------------------------------------------------

                       CHANNEL 2 - 7 DEFAULTS

    TYPE | BAUD | RXC SOURCE | TXC SOURCE | TXC CLOCK LINE | TXC LINE SOURCE
    ------------------------------------------------------------------------
     ASY | 9600 |    TXC     |    BRG     |       OUT      |      TXC
    ------------------------------------------------------------------------
     ESY | 9600 |    XTL     |    BRG     |       OUT      |      TXC
    ------------------------------------------------------------------------
     HDL | 9600 |    XTL     |    TXC     |       OUT       |      TXC
    ------------------------------------------------------------------------
     DMA | 9600 |    XTL     |    TXC     |       OUT      |      TXC
    ------------------------------------------------------------------------

    NOTE:  Select DMA for channels 0 and 1 for any HDLC applications.







    60                              PICO Engine                  SERVICE MANUAL
    ISIS REFERENCES                                                May 27, 1988


                           8.2  ISIS SOFTWARE STRAPPING


        NAN.M MACRO PARAMETRIC FIELD SYMBOLS AND CHANNEL RELATIONSHIPS

    Field 0:  Channel Number Select

          NAME      |  TYMFILE SYMBOL
    ----------------------------------
            0       |       0
            1       |       1
            2       |       2
            3       |       3
            4       |       4
            5       |       5
            6       |       6
            7       |       7

    Field 1:  Channel Type Select

          NAME      |  TYMFILE SYMBOL
    ----------------------------------
          ASYNC     |       ASY
          ESYNC     |       ESY
          HDLC      |       HDL
          HDLC/DMA  |       DMA

    Field 2:  Baud Rate Select

          NAME      |  TYMFILE SYMBOL
    ----------------------------------
            50      |       50
            75      |       75
            110     |       110
            150     |       150
            300     |       300
            600     |       600
            1200    |       1200
            2400    |       2400
            4800    |       4800
            9600    |       9600
            14.4K   |       14.4K
            19.2K   |       19.2K
            38.4K   |       38.4K
            48.0K   |       48.0K
            56.0K   |       56.0K
            64.0K   |       64.0K
            72.0K   |       72.0K
            128.0K  |       128.0K
            256.0K  |       256.0K




    61                              PICO Engine                  SERVICE MANUAL
    ISIS REFERENCES                                                May 27, 1988



    Field 3:  Receive Source

          NAME      |  TYMFILE SYMBOL
    ----------------------------------
          RTxC      |       RTC
          TRxC      |       TRC
      BR GENERATOR  |       BRG
      DPLL OUTPUT   |       DPL

    Field 4:  Transmit Source

          NAME      |  TYMFILE SYMBOL
    ----------------------------------
          RTxC      |       RTC
          TRxC      |       TRC
      BR GENERATOR  |       BRG
      DPLL OUTPUT   |       DPL

    Field 5:  Transmit Clock Line

          NAME      |  TYMFILE SYMBOL
    ----------------------------------
          INPUT     |       IN
          OUTPUT    |       OUT

    Field 6:  Transmit Clock Line Source

          NAME      |  TYMFILE SYMBOL
    ----------------------------------
          XTAL      |       XTL
          TRxC      |       TRC
      BR GENERATOR  |       BRG
      DPLL OUTPUT   |       DPL

    EXAMPLES:

            NAN.M(0,DMA,56K,RTC,TRC,IN,TRC)     : 12% IOC LOAD
            NAN.M(1,DMA,9600,RTC,TRC,IN,TRC)    : 04% IOC LOAD
            NAN.M(2,ESY,4800,,,,)               : 24% IOC LOAD
            NAN.M(3,ASY,4800,,,,)               : 16% IOC LOAD
            NAN.M(4,ASY,4800,,,,)               : 16% IOC LOAD
            NAN.M(5,HDL,9600,,,,)               : 20% IOC LOAD
            NAN.M(6,ESY,2400,,,,)               : 12% IOC LOAD
            NAN.M(7,HDL,2400,,,,)               : 10% IOC LOAD

    WARNING:  Always specify the exact I/O baud rates required
              for every channel.    If  not specified the ISIS
              assign all channels 9600 baud which may overload
              your particular machine!




    62                              PICO Engine                  SERVICE MANUAL
    ISIS REFERENCES                                                May 27, 1988



                       SAMPLE TYMFILE
    :       ISIS-II DEVELOPMENT NODE 2774 - PICO - 09-MAY-88 - TCK
    :               HARDWARE CONFIGURATION

    MACHIN  EQ      4               :  NANO ENGINE ENVIRONMENT
    SILINS  EQ      $A 2            :  SIO NODE CODE V.35 OR V.24
    NSYNC   EQ      2               :  MAX ESYNC LINES=2 FOR S.REF(X)!
    NLINES  EQ      1               :  SYNC LINES FOR THE NODE CODE
    STRACE  EQ      1               :  S-BUS TRACE FACILITY
    M.NCARD EQ      1               :  NO. OF MOTHER BOARDS
    M.NP0   EQ      $A 6            :  NO. OF DEVICES ON MOTHER BOARD
    M.DA0   EQ      080             :  ADDRESS OF MOTHER BOARD
    :
    :               ISIS CONFIGURATION CONSTRAINTS
    NSLOT   EQ      7             :  HIGHEST SLOT # TO CONNECT
    NLU     EQ      $A 4          :  MAX. NO. OF LOGICAL UNITS/SLOT

    :               NODE CONFIGURATION
    TII     EQ      1               :  1 IF TYMNET-II ON NODE
    NETID   EQ      $A 56           :  MAX HEADROOM???
    SUP     EQ      0               :  1 IF SUPERVISOR
    NOSEG   EQ      0               :  NO SEGMENTATION OPTIMIZATION
    LBOOT   EQ      1               :  ALLOW ROOM FOR BOOTSTRAP
    PTHRU   EQ      0               :  1 IF PASSTHROUGHS INHIBITTED
    IKNRNG  EQ      1               :  ISIS KERNEL NEG INDEX-VER 7.0+
    MACHNM  EQ      $8 2774         :  NODE NUMBER
    HST0    EQ      $A 1028         :  NETWORK CONFIGURATION
    XLINKS  EQ      $A 4            :  WILD CARD NEIGHBORS

            TIILNK(3202,8,12,,56)   :  V.35 DSU
            TIILNK(2030,8,12,,56)   :  V.35 DSU
            TIILNK(2475,8,8)        :  V.24 OR TYMSYNC

    :   MODIFIED NON-DEFAULT SCC VALUES SPECIFIED!!!
    :   NAN.M = TYMFILE MACRO TO OVERRIDE DEFAULT SCC VALUES (VALUE FIELD = 7)
    :   VALUE 0 = CHANNEL #, 1 = CHANNEL TYPE, 2 = BAUD RATE, 3 = RECEIVE CLOCK
    :   SOURCE, 4 = TRANSMIT CLOCK SOURCE, 5 = TRANSMIT CLOCK LINE INT/EXT,
    :   6 = TRANSMIT CLOCK LINE SOURCE

            NAN.M(0,DMA,56K,RTC,TRC,IN,TRC)     : 12% IOC LOAD
            NAN.M(1,DMA,9600,RTC,TRC,IN,TRC)    : 04% IOC LOAD
            NAN.M(2,ESY,4800,,,,)               : 24% IOC LOAD
            NAN.M(3,ASY,4800,,,,)               : 16% IOC LOAD
            NAN.M(4,ASY,4800,,,,)               : 16% IOC LOAD
            NAN.M(5,HDL,9600,,,,)               : 20% IOC LOAD
            NAN.M(6,ESY,2400,,,,)               : 12% IOC LOAD
            NAN.M(7,HDL,2400,,,,)               : 10% IOC LOAD

    : CAUTION--THIS MACHINE IS OVER CONFIGURED  : 114% IOC REQUIRED
    : OVERCONFIGURED PICO ENGINES ARE SUBJECT TO CATASTROPHIC FAILURE
    : FROM WHICH THERE IS NO RECOVERY AT THIS TIME.  MACHINE MUST BE
    : MANUALLY REINITIALIZED TO RESET IOC BOARD FOLLOWING TOTAL FAILURE!

    63                              PICO Engine                  SERVICE MANUAL
    ISIS REFERENCES                                                May 27, 1988



    :      SLOT 0 - T-II NODE CODE
    S0CORE  EQ      $A 245          :  Node Code Memory allocation
    NLUS0   EQ      $A 3            :  Node Code Network Ports
    S0L0    S.REF(2)                :  1st Esync line to boot & load over
    S0L1    M.REF(0,0)              :  1st HDLC/DMA line available
    S0L2    M.REF(0,7)              :  Last HDLC/INT line available

    :       SLOT 1 - TYMSAT
    S1CORE  EQ      $A 80           :  Slot memory allocation
    S1LIC   EQ      TL.AUX          :  Originate Aux Circuits
    NLUS1   EQ      $A 1            :  1 SIO-ASYNC Port
    S1L0    M.REF(0,3)              :  4800 Baud


    :       SLOT 2 - TYMCOMM
    S2CORE  EQ      $A 80           
    S2LIC   EQ      TL.AUX
    NLUS2   EQ      1
    S2L0    M.REF(0,4)              

    :        SLOT 3 - SDLC OR X.25
    S3CORE  EQ      $A 200
    S3LIC   EQ      TL.AUX
    NLUS3   EQ      2
    S3L0    M.REF(0,1)              
    S3L1    M.REF(0,5)              

    :       SLOT 4 - ESYNC TEST(S)
    S4CORE  EQ      $A 160
    S4LIC   EQ     TL.AUX
    NLUS4   EQ     1
    S4L0    S.REF(6)              

    :       SLOT 5 - THROUGHPUT HOST(S)
    S5CORE  EQ      $A 80
    S5LIC   EQ      TL.AUX
    NLUS5   EQ      0

    :       SLOT 6 - GENERIC SPARE
    S6CORE  EQ      $A 20
    S6LIC   EQ      TL.AUX
    NLUS6   EQ      0

    :       SLOT 7 - GENERIC SPARE
    S7CORE  EQ      $A 20
    S7LIC   EQ      TL.AUX
    NLUS7   EQ      0

            END
                       SAMPLE TYMFILE FOR NODE CODE          
    :       ISIS-II DEVELOPMENT NODE 2774 - PICO - 09-MAY-88 - TCK
    :               HARDWARE CONFIGURATION

    64                              PICO Engine                  SERVICE MANUAL
    ISIS REFERENCES                                                May 27, 1988



    MACHIN  EQ      3               :  TSI/PICO ENGINE
    SILINS  EQ      $A 2            :  64 KB HDLC/DMA + 9.6 KB HDLC/INT
    NSYNC   EQ      2               :  MAX SYNC LINES=2
    NLINES  EQ      1               :  SYNC LINES FOR THE NODE CODE
    STRACE  EQ      1               :  S-BUS TRACE FACILITY
    M.NCARD EQ      1               :  NO. OF MOTHER BOARDS
    M.NP0   EQ      $A 6            :  NO. OF DEVICES ON MOTHER BOARD
    M.DA0   EQ      080             :  ADDRESS OF MOTHER BOARD
    :
    :               ISIS CONFIGURATION CONSTRAINTS
    NSLOT   EQ      7             :  HIGHEST SLOT # TO CONNECT
    NLU     EQ      $A 4          :  MAX. NO. OF LOGICAL UNITS/SLOT

    :               NODE CONFIGURATION
    TII     EQ      1               :  1 IF TYMNET-II ON NODE
    NETID   EQ      $A 56           :  MAX HEADROOM???
    SUP     EQ      0               :  1 IF SUPERVISOR
    NOSEG   EQ      0               :  NO SEGMENTATION OPTIMIZATION
    LBOOT   EQ      1               :  ALLOW ROOM FOR BOOTSTRAP
    PTHRU   EQ      0               :  1 IF PASSTHROUGHS INHIBITTED
    IKNRNG  EQ      1               :  ISIS KERNEL NEGATIVE INDEXING
    MACHNM  EQ      $8 2774         :  NODE NUMBER
    HST0    EQ      $A 1028         :  NETWORK CONFIGURATION
    XLINKS  EQ      $A 4            :  WILD CARD NEIGHBORS

            TIILNK(3202,8,12,,56)
            TIILNK(2030,8,12,,56)
            TIILNK(2475,8,8)

    :   MODIFIED NON-DEFAULT SCC VALUES SPECIFIED!!!
    :   NAN.M = TYMFILE MACRO TO OVERRIDE DEFAULT SCC VALUES (VALUE FIELD = 7)
    :   VALUE 0 = CHANNEL #, 1 = CHANNEL TYPE, 2 = BAUD RATE, 3 = RECEIVE CLOCK
    :   SOURCE, 4 = TRANSMIT CLOCK SOURCE, 5 = TRANSMIT CLOCK LINE INT/EXT,
    :   6 = TRANSMIT CLOCK LINE SOURCE

    :********COMMENT OUT NAN.M MACRO FOR THE NODE CODE*********
    :        NAN.M(0,DMA,56K,RTC,TRC,IN,TRC)     : 12% IOC LOAD
    :        NAN.M(1,DMA,9600,RTC,TRC,IN,TRC)    : 04% IOC LOAD
    :        NAN.M(2,ESY,4800,,,,)               : 24% IOC LOAD
    :        NAN.M(3,ASY,4800,,,,)               : 16% IOC LOAD
    :        NAN.M(4,ASY,4800,,,,)               : 16% IOC LOAD
    :        NAN.M(5,HDL,9600,,,,)               : 20% IOC LOAD
    :        NAN.M(6,ESY,2400,,,,)               : 12% IOC LOAD
    :        NAN.M(7,HDL,2400,,,,)               : 10% IOC LOAD

    : CAUTION--THIS MACHINE IS OVER CONFIGURED  : 114% IOC REQUIRED
    : OVERCONFIGURED PICO ENGINES ARE SUBJECT TO CATASTOPHIC FAILURES
    : FROM WHICH THERE IS NO RECOVERY AT THIS TIME.  MACHINE MUST BE
    : MANUALLY REINTIALIZED TO RESET IOC BOARD FOLLOWING TOTAL FAILURE!

    :      SLOT 0 - T-II NODE CODE
    S0CORE  EQ      $A 245

    65                              PICO Engine                  SERVICE MANUAL
    ISIS REFERENCES                                                May 27, 1988


    NLUS0   EQ      $A 3
    S0L0    S.REF(2)                : 1st Esync line to boot & load over
    S0L1    M.REF(0,0)              : 1st HDLC/DMA line available
    S0L2    M.REF(0,7)              : Last HDLC/INT line available

    :       SLOT 1 - TYMSAT
    S1CORE  EQ      $A 80
    S1LIC   EQ      TL.AUX
    NLUS1   EQ      $A 1
    S1L0    M.REF(0,3)              


    :       SLOT 2 - TYMCOMM
    S2CORE  EQ      $A 80
    S2LIC   EQ      TL.AUX
    NLUS2   EQ      1
    S2L0    M.REF(0,4)              

    :        SLOT 3 - SDLC OR X.25
    S3CORE  EQ      $A 200
    S3LIC   EQ      TL.AUX
    NLUS3   EQ      2
    S3L0    M.REF(0,1)              
    S3L1    M.REF(0,5)              

    :       SLOT 4 - ESYNC TEST(S)
    S4CORE  EQ      $A 160
    S4LIC   EQ     TL.AUX
    NLUS4   EQ     1
    S4L0    S.REF(6)              

    :       SLOT 5 - THROUGHPUT HOST(S)
    S5CORE  EQ      $A 80
    S5LIC   EQ      TL.AUX
    NLUS5   EQ      0

    :       SLOT 6 - GENERIC SPARE
    S6CORE  EQ      $A 20
    S6LIC   EQ      TL.AUX
    NLUS6   EQ      0

    :       SLOT 7 - GENERIC SPARE
    S7CORE  EQ      $A 20
    S7LIC   EQ      TL.AUX
    NLUS7   EQ      0

            END

    NOTE:  For line speeds of greater than 14.4K use Window Size of 12.





    66                              PICO Engine                  SERVICE MANUAL
    ISIS REFERENCES                                                May 27, 1988


                                    8.3  MERLIN


         The  "/T" option  has been  added to  versions 3.0+  for TSI  and PICO
    environments.  M68010 IOCs require 1024 byte boundaries be defined, not 256
    bytes as  on the Engine.   The proper syntax  for merging Nad  Image Binary
    files into "bound" files is:

    filespec.BND/T=filespec.NIB,filespec.N00,...[CR].   The  same   version  of
    MERLIN is used to create standard Engine files by simply not  selecting the
    /T option.

        Version 4.0 has been created to incorporate all changes which were made
    independantly to versions 1.8, 2.1 and 3.0.






                                  8.4  TBETATEST


         Source files  for PICO  software are  to be  found in  the (TBETATEST)
    directories of  SYSTEMs 25  and 33.  I2IS09  and MRLN04  files are  not yet
    available in (BETATEST) directories in the public Tymnet.




























    67                              PICO Engine                  SERVICE MANUAL
    PERFORMANCE CAPABILITIES                                       May 27, 1988






                           9 -  PERFORMANCE CAPABILITIES







                                  9.1  WEIGHTING


         IOC processor bandwidth determines the overall I/O bandwidth available
    for  applications.    Any  individual  SCC   channel  will   perform  quite
    differently when contending for machine resources with other  I/O channels.
    NTD  has produced  an imperically  derived guideline  for  configuring PICO
    resources.  Weighting  values are provided  for channels at  various speeds
    and protocols.   The total  weighting load  on PICO  should not  exceed 100
    (100%).   Users  may  choose to  exceed  the  sum total  of  100  for their
    applications based  on the  premise that not  all lines  will be  driven to
    saturation but should PICO be  subjected to a momentary burst of  heavy I/O
    it is  probably (not just  possible) that PICO  will suffer  a catastrophic
    system level failure  from which there is  no recovery scheme other  than a
    physical system initialization be performed.  The weighting factors presume
    worst case 100% loading of selected channels.

         The weighting table provides a linear translation of I/O configuration
    to machine resource utilization.   Obviously variations exist which  are in
    real life not linear at all and  these can be dealt with as subsets  of the
    table.  The  weighting table  does not  attempt to  define what  percent of
    available  bandwidth  of a  given  port  will be  actual  data  vs protocol
    overhead!



















    68                              PICO Engine                  SERVICE MANUAL
    PERFORMANCE CAPABILITIES                                       May 27, 1988


     CHANNEL | SPEED | PROTOCOL | Wt per PORT
    -----------------------------------------
       0-1   | 56.0K | HDLC/DMA | 24.0 each
    ---------------------------------------
       0-1   | 19.2K | HDLC/DMA | 08.0 each
    ---------------------------------------
       0-1   |  9.6K | HDLC/DMA | 04.0 each
    ---------------------------------------
       0-1   |  4.8K | HDLC/DMA | 02.0 each
    ---------------------------------------
       0-1   |  2.4K | HDLC/DMA | 01.0 each
    ---------------------------------------
       0-1   |  1.2K | HDLC/DMA | 00.5 each
    ---------------------------------------
       0-7   | 19.2K | TYMSYNC  | 96.0 each
    ---------------------------------------
       0-7   |  9.6K | TYMSYNC  | 48.0 each
    ---------------------------------------
       0-7   |  4.8K | TYMSYNC  | 24.0 each
    ---------------------------------------
       0-7   |  2.4K | TYMSYNC  | 12.0 each
    ---------------------------------------
       0-7   |  1.2K | TYMSYNC  |  6.0 each
    ---------------------------------------
       0-7   |  9.6K | ASYNC    | 32.0 each
    ---------------------------------------
       0-7   |  4.8K | ASYNC    | 16.0 each
    ---------------------------------------
       0-7   |  2.4K | ASYNC    |  8.0 each
    ---------------------------------------
       0-7   |  1.2K | ASYNC    |  4.0 each
    ---------------------------------------
       0-7   |  600  | ASYNC    |  2.0 each
    ---------------------------------------
       0-7   |  300  | ASYNC    |  1.0 each

     CHANNEL | SPEED | PROTOCOL | Wt per PORT
    -----------------------------------------
       2-7   | 19.2K | HDLC/INT | 40.0 each
    ---------------------------------------
       2-7   |  9.6K | HDLC/INT | 20.0 each
    ---------------------------------------
       2-7   |  4.8K | HDLC/INT | 10.0 each
    ---------------------------------------
       2-7   |  2.4K | HDLC/INT | 05.0 each
    ---------------------------------------
       2-7   |  1.2K | HDLC/INT | 02.5 each

         Version  1.5  PICO  at  Betatest  is  not  well  suited  for  any SYNC
    protocols.   It  will  support  them  and  in  fact  sustain  close  to the
    theorectical maximum throughput  on SYNC lines up  to 9.6K bps (1200  CPS @
    9.6K, 600 CPS @ 4.8K ,...) but at the cost of degrading service to the rest


    69                              PICO Engine                  SERVICE MANUAL
    PERFORMANCE CAPABILITIES                                       May 27, 1988


    of the machine.  Remember that the ISIS software and IOC Firmware translate
    the Engine sync  SVCs for Z80  SIO devices and  then for Z8530  devices and
    back again.

         Alphatesting revealed that when the emulated sync is heavily  used the
    SCCs exhibit transmit underruns and receive overruns.  Recall from the ISIS
    section  of  this manual  that  there  is no  return  status  address field
    associated with the emulated sync lines (channels 2 and 6 of  the example).
    Should an over/underrun  occur the software  just keeps on  executing force
    output SVCs.  The underruns are seen in the Node Code XRAY crypto logger as
    bad BORIs and the overruns seem  to appear as buffer count erros  at times.
    If the  channel gets to  far behind  it will never  recover.  The  same can
    happen to HDLC/INT  and ASYNC configured channels  but not so  easily.  The
    only recovery is a board reset such as is issued at ISIS initialziation.  A
    phenomenon of  Backdamming occurs on  PICO when overconfigured.   A channel
    may  experience an  underrun/abort  and then  go through  a  reset routine.
    Other channels  now have  to wait for  service while  the channel  reset is
    performed making  them subject  to being  under/overrun.  The  next channel
    takes a "hit" and enters the channel reset routine consumming even more IOC
    processor  time so  of course  the remaining  channels get  critically less
    service and suffer the same effect.  The result is the catastrophic "death"
    of all I/O.

         Betatest PICO also manifests intermittent command errors on  the down-
    line-load channels which create  difficulties on occassion when  loading or
    dumping  software.  Typically  problems  are not  experienced  with "bound"
    files which do not  have all of the slot  code merged in with the  ISIS and
    the Node Code.  The local TTY BOOT function is not fully implemented at 1.5
    Betatest either.  NTD is addressing these items as well as implementing the
    necessary changes for  Version 1.6 PICO  with battery backup  options.  DMA
    channels 0 and 1 reporting  of overrun/underrun events for the  software is
    also  currently  being  evaluated.   It  is  properly  functioning  on  INT
    channels.  Additionally,  NTD is  optimizing some of  the code  to increase
    PICO throughput and "robustness".   The anomalies in Version 1.5  PICO with
    Version 1.3 are  a know n quantity.   PICO may be introduced  into Betatest
    environments with the qualifier that customers be informed of  the existing
    "bugs" and should experience few or no problems as long as they keep within
    the recommended guide lines.  Firmware upgrades can be easily  performed at
    customer  sites when  available  with minimal  risk or  inconvience  to the
    customer.

         As PICO will most likely  not be configured for SYNC  applications and
    slot loads can  be easily performed after  bringing PICO up in  the Network
    environment,  it  would  seem to  be  in  the best  interests  of  both the
    customers and  Tymnet to provide  PICO some "real  world" exposure  under a
    controlled environment where the machines can be thoroughly benchmarked for
    performance  and any  problems which  may be  experienced given  direct and
    prompt attention.






    70                              PICO Engine                  SERVICE MANUAL
    PERFORMANCE CAPABILITIES                                       May 27, 1988


                  9.2  COMPARATIVE ANALYSIS VS ENGINE/HDLC MICRO







                    9.3  PERFORMANCE CAPABILITIES OVERVIEW ISIS


         The total throughput of the PICO engine is a function of the  speed of
    the communication lines and the  available IOC power.  The number  of ports
    specified for the machine, the  number of ISIS slots, the various  types of
    software  applications, and  the clock  speeds selected  for the  lines all
    impact the available CPU power  of the machine.  Therefore, the  number and
    speed of the ports allowable in the PICO, and the total  machine throughput
    is subject to the individual configuration.  The total aggregate throughput
    must not  exceed 12,500 cps.   This is about  27% higher than  the existing
    HDLC  Micro Engine.   Note  however that  the  bulk of  PICO  throughput is
    carried over the  two HDLC/DMA channels whereas  the HDLC Micro has  a more
    even distribution of channel I/O throughput.

         The  PICO   SIO/ASYNC  ports  will   support  full  or   half  duplex;
    conversation or block mode  data transmission.  When supporting  block mode
    transmission, or PC file transfers, little CPU power is left to support any
    other slot interface applications, or  even a full array of  network lines.
    When using PC's and/or block mode terminals the most  logical configuration
    would assign up  to 4 SIO/ASYNC  ports @ up  to 4.8K or  2 @ 9.6K  and then
    reserve either  one or  both DMA channels  for network  connectivity.  Each
    9.6K SIO/ASYNC port will transfer data up to approximately 600 cps.

         A  special  note  about   the  ASYNC.   XON/XOFF  functions   are  not
    instantaneous  on  PICO.  PICO  must  finish executing  the  current output
    transmit channel command word before responding to the Data Control 3 (13x)
    character.   This means  that the  higher the  baud rate,  the  greater the
    potential to  overrun the  DTE.  At 9600  baud over  100 characters  may be
    transmitted  to  the DTE  after  the DTE  has  send the  XOFF  to  the PICO
    receiver.  XOFF  response is strictly  dependant on the  byte count  of the
    current TX CCW.

         The weighting  table provides a  reasonable guideline  for determining
    PICO   configuration   regardless  of   any   application   interface  code
    eccentricities.   Whether dedicating  ports  to X.25,  SDLC,  SNA, TYMCOMM,
    TYMSAT, 327X, X780  or Node Code applications,  stay within +/- 10%  of the
    maximum aggregate weight!








    71                              PICO Engine                  SERVICE MANUAL
    MANUFACTURING SYSTEM TESTS                                     May 27, 1988






                         10 -  MANUFACTURING SYSTEM TESTS







                               10.1  TEST PHILOSOPHY









































    72                              PICO Engine                  SERVICE MANUAL
    MANUFACTURING SYSTEM TESTS                                     May 27, 1988



      I.  SUB-ASSEMBLY UNIT TEST
          A.  POST
              1.  PASS -- CONTINUE @ II-C.
              2.  FAIL -- CONTINUE @  I-B.

          B.  BRING-UP FAULTY EP/IOC
              1.  EP BRING-UP PROM TESTS (22 DEBUG SCOPE LOOPS)
                  a.  8 PROMS + 2 10-POSITION DIP SWITCHES REQUIRED
                  b.  PROM CODE @ (EST:33)TSIBUL.*, +SOURCE, +LISTING
              2.  IOC BRING-UP
                  a.  IOCBUG ON BOARD DEBUGGER
                  b.  68010 u-PROCESSOR EMULATOR

           C.  DOWN-LINE-LOADING (TTY TBOOT ?)
               1.  PORTS 0-1
                   a.  V.35 - EXT CLOCK SOURCES
                   b.  V.24 - EXT/INT CLOCK SOURCES
               2.  PORTS 2-3
                   a.  TYMSYNC - EXT/INT CLOCK SOURCES
                   b.  V.24 - EXT/INT CLOCK SOURCES

            D.  STAND-ALONE DIAGNOSTICS (DMEMXX ?)
                1.  DCPU04             
                    a.  MINIMUM 2 PASSES UNIT/STAGING LEVELS
                    b.  MINIMUM 2 HOURS SYSTEMS LEVEL
                2.  DMAC07
                    a.  MINIMUM 2 PASSES UNIT/STAGING LEVELS
                    b.  MINIMUM 2 HOURS SYSTEMS LEVEL
           **   3.  DSIOXX 
                    a.  MINIMUM 50 PASSES UNIT/STAGING LEVELS
                    b.  MINIMUM 108 HOURS SYSTEMS LEVEL
              **   DSIOXX ERROR RATE =<1 ERROR/3000 PASSES
                   NO ERRORS ALLOWED FOR DCPU04 OR DMAC07!

     II.    Q.A. INSPECTION SEQUENCE
            A.  100% PHYSICAL AUDIT AT SYSTEM ASSEMBLY PRE BURN-IN
                1.  PRIOR TO SYSTEM TESTS
                2.  RELEASE TO SYSTEM TEST (BURN-IN)
        **  B.  20% RANDOM AUDIT POST BURN-IN
                1.  FUNCTIONAL
                    a.  DCPU04 -- MINIMUM STAGING LEVEL DURATION
                    b.  DMAC04 -- MINIMUM STAGING LEVEL DURATION
                    c.  DSIOXX -- MINIMUM STAGING LEVEL DURATION
                2.  PHYSICAL
                    a.  COMPONENT'S
                    b.  REV LEVEL'S
                    c.  ECO'S
        **  AUDIT DETECTED FAILURES OF 20% LOT SELECTION NECESSITATES
            100% INSPECTION OF LOT!  (ie. 1 of 5 fails, check all 5)

    III.    SYSTEM ASSEMBLY TESTS -- 144 HOURS TOTAL
            A.  STANDALONE DIAGNOSTICS -- 96 HOURS TOTAL

    73                              PICO Engine                  SERVICE MANUAL
    MANUFACTURING SYSTEM TESTS                                     May 27, 1988


                1.  DCPU04 -- 2  HOURS
                2.  DMAC07 -- 2  HOURS
                3.  DSIOXX -- 92 HOURS
            B.  ISIS ENVIRONMENT -- 48 HOURS TOTAL
                1.  NODE CODE --TPUT LOAD TESTS
                    a.  2 V.35 64K PORTS - HDLC/DMA
                2.  SLOT SYNC EXERCISER
                    a.  2 ESYNC 9.6K PORTS - TYMSYNC/INT
                3.  SLOT SIO EXERCISER
                    a.  4 V.24 9.6K PORTS - HDLC/INT

     IV.        STAGING SEQUENCE -- 168 HOURS TOTAL
                A.  STANDALONE DIAGS
                    1.  DCPU04
                    2.  DMAC07
                    3.  DSIOXX

                B.  GENERIC ISIS EVIRONMENT EXERCISER
                    1.  TPUT LOAD
                    2.  SLOT EXERCISERS
                    3.  CUSTOMER APPLICATION INTERFACE CODE
                    4.  STANDALONE DIAGS -- LAST PASS -- 4 HOURS

      V.        FINAL Q.A. -- OUT THE DOOR






























    74                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988






                                  11 -  APPENDIX







                            11.1  NTS LABORATORY TESTS









































    75                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988


    I.      POWER SUPPLY
            
            A.  AC/DC Thresholds
                1.  Voltage Margins
                2.  Thermal Margins

            B.  Power Up Procedures
                1.  Voltage Test Points
                2.  PFT and VCO Adjustments

            C.  Replacements
                1.  5,+/-12 VDC Supplies
                2.  Fuses, Switches, Wiring

            D.  Power Requirements
                1.  Total AC/DC Draw
                2.  AC Noise Sensitivity


    II.     COOLING SYSTEM

            A.  Heat Dissipation
                1.  Thermal Sensor Testing
                2.  Air Flow Occlusion/Effectiveness

            B.  Fan Failures
                1.  Critical Delta Time From Fan To System Failure
                2.  Replacement

            C.  Environmental
                1.  Ambient Operating Temperature Range
                2.  External Clearance Specifications


    III.    MECHANICAL      

            A.  Maintenance
                1.  Component Removal/Installation
                2.  Structural Integrity, Wire/Cable Routing

            B.  Connectors
                1.  Hardware Fasteners
                2.  Ribbon and I/O Interconnect

            C.  Shipping
                1.  Container
                2.  Precaution Determination







    76                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988


    IV.     DIAGNOSTICS

            A.  Power On Self Tests
                1.  Confidence Level Determination
                2.  LED Interpretation Of Results

            B.  Down Line Load
                1.  Engine Standalone Diagnostics
                2.  ISIS Slot Environment Diagnostics

            C.  MACSBUG
                1.  Problem Identification Via ENGBUG
                2.  Problem Identification Via IOCBUG

            D.  Crash
                1.  Machine Dump/Restoration
                2.  Slot Dump/Restoration


    V.      COMMUNICATION PORTS

            A.  Strapping
                1.  Soft Options
                2.  Hard Option
            
            B.  Line Testing
                1.  EIA/CCITT Compliance
                2.  Error Rate

            C.  Failure
                1.  Determination
                2.  Recovery

            D.  Local TTY
                1.  Async Code Load
                2.  TTY Port Options


    VI.     QUALIFY NANO CAPABLE OF SUPPORTING ISIS/APPLICATION SOFTWARE

            A.  Boot
                1.  Cold/Warm
                2.  SIO/TYMSYNC

            B.  ISIS
                1.  Bring Up Kernal, DDT, Slot Exercisers
                2.  Evaluate Execution Of Engine Instruction Set

            C.  Node Code
                1.  SIO
                2.  TYMSYNC

            D.  X.25/X.75

    77                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988


                1.  HDLC
                2.  BISYNC

            E.  SDLC
                1.  BGTEST Module
                2.  Put4<->Put2 Session

            F.  BISYNC
                1.  HIF/TIF Simulator
                2.  3270 Session

            G.  ASYNC
                1.  TYMSAT ATI
                2.  TYMCOM AHI


    VII.    THERMALS

            A.  Diagnostics Under NTD Max/Min Temp Thresholds

            B.  System Software Under Same


    VIII.   SHIPPING TEST

            A.  Package And Ship Complete Unit

            B.  Receive, Evaluate, Bringup Target


























    78                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988


                             11.2  DOCUMENT REFERENCES





















































    79                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988


    Schematic, IOC           Drawing number 440298-001

    Schematic, EP            Drawing number 440285-001

    Schematic, SCC           Drawing number 440296-001

    Schematic, BACKPLANE     Drawing number 440XXX-001

    Schematic, LED CARD      Drawing number 440XXX-001

    XRAY Reference Manual 

    ISIS Reference Manual

    TSI Console Users Guide

    TSI Engine Debugger Command Description

    TSI Controller Self-Tests GED

    NANO Engine GED

    ISIS/NANO GED

    NANO Engine Maintenance Manual

    Motorola Macsbug Users Guide


    Motorola 68010 User's Manual

    Motorola 68901 Advance Information

    Motorola 68450 Advance Information

    Zilog Z8030 Z-BUS SCC/Z8530 SCC Serial Communications Controller
    Technical Manual 

    Advanced Micro Devices Programmable Logic Handbook/Data Book 

    CCITT Specification for V.35

    CCITT Specification for V.24

    EIA RS-232 Specification

    EIA RS-422/423 Specification

    MICROTEC ASM68K User Guide and Reference Manual

    MICROTEC MCC68K C Cross Compiler User Guide and Reference Manual        



    80                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988


                                  11.3  GLOSSARY





















































    81                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988


    CCITT         International Telephone and Telegraph Consultative
                  Committee. A specialized organization of the United
                  Nations under the International Telecommunications
                  Union, whose task it is to make technical
                  recommendations about telephone, telegraph, and data
                  communication interfaces. 

    CMOS          Complementary metal-oxyde semi-conductor.  A device
                  using both P-channel and N-channel MOS transistors.

    DIN           Deutsch Industrie Norm

    DLL           Down-line-load (ie. as via LOAD II)

    DRAM          Dynamic Ram - requires refresh.

    ENGbug        Engine debugger facility

    EP            Engine Processor

    FCC           Federal Communications Commission

    IEC-435       International Electrotechnical Committee specification

    IOC           Input/output controller

    IOCbug        IOC debugger facility

    JEDEC         The Joint Electron Devices Enginering Council

    MSI           Medium scale integration

    NMOS          N-channel metal-oxide semi-conductor.  A device whose
                  source and drain are n-type diffusions in a p-type
                  substrate.

    OSHA          Occupational safety and health administration

    PROM          Programmable read only memory

    RAM           Random access memory, a type of memory chip in which
                  any location can be accessed directly without having 
                  to follow a sequence of storage locations.

    RS-232C       The interface , standardized by the Electronic
                  Industries Association (EIA), between data terminal
                  equipment (DTE) and data communication equipment (DCE)
                  employing serial binary data inter-change.
                  Standard is applicable for use at data
                  signalling rates in the range from 0 to a nominal upper
                  limit of 20,000 bits per second (BPS).



    82                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988


    RS-422        This EIA standard specifies the electrical
                  characteristics of the balanced voltage digital 
                  interface circuit normally implemented in
                  integrated technology that may be employed when
                  specified for the interchange of serial binary signals
                  between DTE and DCE or in any interconnection of binary
                  signals between voice or data equipment where
                  modulation rate is up to 10  Megabauds.

    RS-449        This EIA standard specifies the general purpose
                  37-position and 9-position interface for DTE and DCE
                  employing serial binary data interchange. This standard
                  is applicable for use at data signaling rates in the
                  range from zero to a nominal upper limit of 2,000,000
                  bits per second. Related electrical characteristics are
                  specified in EIA-RS-422/423.

    RXC           Receive clock

    SCC           Serial communications controller

    SRAM          Static RAM - does not require any refresh.

    SSI           Small scale integration

    TTL           Transistor-transistor logic

    TXC           Transmit clock

    UL            Underwriters laboratory

    VDE           Standard for Office Appliances and Machines

    VLSI          Very large scale integration

    V.24          A CCITT data communications hardware interface
                  standard for communications at speeds of up to 
                  19,200 bits per second.

    V.35          A CCITT data communications hardware interface
                  standard for communications at speeds of up to
                  56,000 bits per second.












    83                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988


                             11.4  ERROR RETURN CODES







                               11.5  DEVICE VECTORS







                              11.6  MAILBOX STRUCTURE







                            11.7  CHANNEL COMMAND WORDS







                         11.8  TROUBLE-SHOOTING FLOWCHART





















    84                              PICO Engine                  SERVICE MANUAL
    APPENDIX                                                       May 27, 1988


        /\              /\              /\              /\              /\
       /  \            /  \            /  \            /  \            /  \
      /    \          /    \          /    \          /    \          /    \
     /      \        /      \        /      \        /      \        /  ALL \
    /  POWER \_YES__/CONSOLE \_YES__/ SELF-  \_YES__/  BOOT  \_YES__/ SYSTEM \_
    \  ON OK /  ^   \DISPLAY /  ^   \ TESTS  /  ^   \  OK ?  /  ^   \DLL DIAG/|
     \   ?  /   |    \ OK ? /   |    \ OK ? /   |    \      /   |    \  O K / |
      \    /    |     \    /    |     \    /    |     \    /    |     \  ? /  |
       \  /     |      \  /     |      \  /     |      \  /     |      \  /   |
        \/      |       \/      |       \/      |       \/      |       \/   Y|
        |N      |       |N      |       |N      |       |N      |       |N   E|
        |O      |       |O      |       |O      |       |O      |       |O   S|
    ----------  |   ----------  |   ----------  |   ----------  |       /\    |
    |  CHECK |  |   |  CHECK |  |   |  CHECK |  |   |  CHECK |  |      /  \   |
    |  POWER |__|   |TERMINAL|__|   |  PROMS |__|   |E99-E100|__|   __/DCPU\__|
    | STRAPS |  |   | STRAPS |  |   |  PALS  |  |   | SWITCH |  |   | \ OK /  |
    ----------  |   ----------  |   ----------  |   ----------  |   |  \  /   |
        |N      |       |N      |       |N      |       |N      |   |N  \/    |
        |O      |       |O      |       |O      |       |O      |   |O  /\    |
    ----------  |   ----------  |   ----------  |   ----------  |   |  /  \   |
    |  CHECK |  |   |  CHECK |  |   |  CHECK |  |   |  BOARD |  |   |_/DMAC\__|
    |  BLOWN |__|   |  9-PIN |__|   |  BOARD |__|   |  SWAP  |__|   | \ OK /  |
    |  FUSES |  |   |  CABLE |  |   | STRAPS |  |   |  IOC   |  |   |  \  /   |
    ----------  |   ----------  |   ----------  |   ----------  |   |   \/    |
        |N      |       |N      |       |N      |       |N      |   |   /\    |
        |O      |       |O      |       |O      |       |O      |   |  /  \   |
    ----------  |   ----------  |   ----------  |   ----------  |   |_/DSIO\__|
    |  CHECK |  |   |  CHECK |  |   |  CHECK |  |   |  BOARD |  |   | \ OK /  |
    |   VDC  |__|   |INTERNAL|__|   |INTERNAL|__|   |  SWAP  |__|   |  \  /   |
    |   OUT  |  |   |CONNECTS|  |   |CONNECTS|  |   |  EP    |  |   |   \/    |
    ----------  |   ----------  |   ----------  |   ----------  |   |   /\    |
        |N      |       |N      |       |N      |       |N      |   |  /  \   |
        |O      |       |O      |       |O      |       |O      |   |_/ISIS\__|
    ----------  |   ----------  |   ----------  |   ----------  |   | \ OK /  |
    |  SWAP  |  |   |  SWAP  |  |   |  SWAP  |  |   |  BOARD |  |   |  \  /   |
    |  POWER |__|   |TERMINAL|__|   |  PICO  |__|   |  SWAP  |__|   |   \/    |
    |  SPPLY |      |        |      |  UNIT  |      |  SCC   |      |         |
    ----------      ----------      ----------      ----------      |         |
        |N              |N              |N              |N          |         |
        |O              |O              |O              |O          |         |
        |_______________|_______________|_______________|___________|         |
                                                                              |
                                         _____________________________________|
                             ___________|___________
                             |COMPLETE INSTALLATION|
                             -----------------------

    NOTE: FOR  THE  DURATION  OF PICO  BETATEST ANY FAILED OR SUSPECT UNITS ARE
          TO BE RETURNED TO NTS-LAB  FOR SPECIFIC FAULT ISOLATION AND IDENTIFI-
          CATION!  FIELD SPARING AND FIRMWARE UPGRADES WILL BE DIRECTED THROUGH
          NTS.



    85                              PICO Engine                  SERVICE MANUAL
  V Pj